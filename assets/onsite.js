(function(r){var N;(function(c,e){"function"===typeof define&&define.amd?define(function(){return e(c)}):e(c)})(this,function(c){N=function(){function e(a){return null==a?String(a):w[Q.call(a)]||"object"}function f(a){return"function"==e(a)}function h(a){return null!=a&&a==a.window}function l(a){return"object"==e(a)}function n(a){return l(a)&&!h(a)&&Object.getPrototypeOf(a)==Object.prototype}function J(a){var g=!!a&&"length"in a&&a.length,b=k.type(a);return"function"!=b&&!h(a)&&("array"==b||0===g||
"number"==typeof g&&0<g&&g-1 in a)}function y(a){return F.call(a,function(a){return null!=a})}function O(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function I(a){return a in U?U[a]:U[a]=RegExp("(^|\\s)"+a+"(\\s|$)")}function G(a){return"children"in a?v.call(a.children):k.map(a.childNodes,function(a){if(1==a.nodeType)return a})}function r(a,g){var b,q=a?a.length:0;for(b=0;b<q;b++)this[b]=a[b];this.length=
q;this.selector=g||""}function K(a,g,b){for(m in g)b&&(n(g[m])||V(g[m]))?(n(g[m])&&!n(a[m])&&(a[m]={}),V(g[m])&&!V(a[m])&&(a[m]=[]),K(a[m],g[m],b)):g[m]!==s&&(a[m]=g[m])}function H(a,g){return null==g?k(a):k(a).filter(g)}function C(a,g,b,q){return f(g)?g.call(a,b,q):g}function D(a,g){var b=a.className||"",q=b&&b.baseVal!==s;if(g===s)return q?b.baseVal:b;q?b.baseVal=g:a.className=g}function M(a){try{return a?"true"==a||("false"==a?!1:"null"==a?null:+a+""==a?+a:/^[\[\{]/.test(a)?k.parseJSON(a):a):a}catch(g){return a}}
function d(a,g){g(a);for(var b=0,q=a.childNodes.length;b<q;b++)d(a.childNodes[b],g)}var s,m,k,L,B=[],da=B.concat,F=B.filter,v=B.slice,x=c.document,z={},U={},R={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},t=/^\s*<(\w+|!)[^>]*>/,P=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,$=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,u=/^(?:body|html)$/i,X=/([A-Z])/g,W="val css html text data width height offset".split(" "),T=x.createElement("table"),b=x.createElement("tr"),
a={tr:x.createElement("tbody"),tbody:T,thead:T,tfoot:T,td:b,th:b,"*":x.createElement("div")},g=/complete|loaded|interactive/,q=/^[\w-]*$/,w={},Q=w.toString,A={},Y,Z,aa=x.createElement("div"),ba={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},V=Array.isArray||function(a){return a instanceof
Array};A.matches=function(a,g){if(!g||!a||1!==a.nodeType)return!1;var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(b)return b.call(a,g);var q;q=a.parentNode;(b=!q)&&(q=aa).appendChild(a);q=~A.qsa(q,g).indexOf(a);b&&aa.removeChild(a);return q};Y=function(a){return a.replace(/-+(.)?/g,function(a,g){return g?g.toUpperCase():""})};Z=function(a){return F.call(a,function(g,b){return a.indexOf(g)==b})};A.fragment=function(g,b,q){var w,d,Q;P.test(g)&&
(w=k(x.createElement(RegExp.$1)));w||(g.replace&&(g=g.replace($,"<$1></$2>")),b===s&&(b=t.test(g)&&RegExp.$1),b in a||(b="*"),Q=a[b],Q.innerHTML=""+g,w=k.each(v.call(Q.childNodes),function(){Q.removeChild(this)}));n(q)&&(d=k(w),k.each(q,function(a,g){if(-1<W.indexOf(a))d[a](g);else d.attr(a,g)}));return w};A.Z=function(a,g){return new r(a,g)};A.isZ=function(a){return a instanceof A.Z};A.init=function(a,g){var b;if(a)if("string"==typeof a)if(a=a.trim(),"<"==a[0]&&t.test(a))b=A.fragment(a,RegExp.$1,
g),a=null;else{if(g!==s)return k(g).find(a);b=A.qsa(x,a)}else{if(f(a))return k(x).ready(a);if(A.isZ(a))return a;if(V(a))b=y(a);else if(l(a))b=[a],a=null;else if(t.test(a))b=A.fragment(a.trim(),RegExp.$1,g),a=null;else{if(g!==s)return k(g).find(a);b=A.qsa(x,a)}}else return A.Z();return A.Z(b,a)};k=function(a,g){return A.init(a,g)};k.extend=function(a){var g,b=v.call(arguments,1);"boolean"==typeof a&&(g=a,a=b.shift());b.forEach(function(b){K(a,b,g)});return a};A.qsa=function(a,g){var b,w="#"==g[0],
d=!w&&"."==g[0],Q=w||d?g.slice(1):g,e=q.test(Q);return a.getElementById&&e&&w?(b=a.getElementById(Q))?[b]:[]:1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType?[]:v.call(e&&!w&&a.getElementsByClassName?d?a.getElementsByClassName(Q):a.getElementsByTagName(g):a.querySelectorAll(g))};k.contains=x.documentElement.contains?function(a,g){return a!==g&&a.contains(g)}:function(a,g){for(;g&&(g=g.parentNode);)if(g===a)return!0;return!1};k.type=e;k.isFunction=f;k.isWindow=h;k.isArray=V;k.isPlainObject=n;k.isEmptyObject=
function(a){for(var g in a)return!1;return!0};k.isNumeric=function(a){var g=Number(a),b=typeof a;return null!=a&&"boolean"!=b&&("string"!=b||a.length)&&!isNaN(g)&&isFinite(g)||!1};k.inArray=function(a,g,b){return B.indexOf.call(g,a,b)};k.camelCase=Y;k.trim=function(a){return null==a?"":String.prototype.trim.call(a)};k.uuid=0;k.support={};k.expr={};k.noop=function(){};k.map=function(a,g){var b,q=[],w;if(J(a))for(w=0;w<a.length;w++)b=g(a[w],w),null!=b&&q.push(b);else for(w in a)b=g(a[w],w),null!=b&&
q.push(b);return 0<q.length?k.fn.concat.apply([],q):q};k.each=function(a,g){var b;if(J(a))for(b=0;b<a.length&&!1!==g.call(a[b],b,a[b]);b++);else for(b in a)if(!1===g.call(a[b],b,a[b]))break;return a};k.grep=function(a,g){return F.call(a,g)};c.JSON&&(k.parseJSON=JSON.parse);k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,g){w["[object "+g+"]"]=g.toLowerCase()});k.fn={constructor:A.Z,length:0,forEach:B.forEach,reduce:B.reduce,push:B.push,sort:B.sort,splice:B.splice,
indexOf:B.indexOf,concat:function(){var a,g,b=[];for(a=0;a<arguments.length;a++)g=arguments[a],b[a]=A.isZ(g)?g.toArray():g;return da.apply(A.isZ(this)?this.toArray():this,b)},map:function(a){return k(k.map(this,function(g,b){return a.call(g,b,g)}))},slice:function(){return k(v.apply(this,arguments))},ready:function(a){g.test(x.readyState)&&x.body?a(k):x.addEventListener("StartOtherLoading",function(){a(k)},!1);return this},get:function(a){return a===s?v.call(this):this[0<=a?a:a+this.length]},toArray:function(){return this.get()},
size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){B.every.call(this,function(g,b){return!1!==a.call(g,b,g)});return this},filter:function(a){return f(a)?this.not(this.not(a)):k(F.call(this,function(g){return A.matches(g,a)}))},add:function(a,g){return k(Z(this.concat(k(a,g))))},is:function(a){return 0<this.length&&A.matches(this[0],a)},not:function(a){var g=[];if(f(a)&&a.call!==s)this.each(function(b){a.call(this,
b)||g.push(this)});else{var b="string"==typeof a?this.filter(a):J(a)&&f(a.item)?v.call(a):k(a);this.forEach(function(a){0>b.indexOf(a)&&g.push(a)})}return k(g)},has:function(a){return this.filter(function(){return l(a)?k.contains(this,a):k(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!l(a)?a:k(a)},last:function(){var a=this[this.length-1];return a&&!l(a)?a:k(a)},find:function(a){var g=this;return a?"object"==typeof a?
k(a).filter(function(){var a=this;return B.some.call(g,function(g){return k.contains(g,a)})}):1==this.length?k(A.qsa(this[0],a)):this.map(function(){return A.qsa(this,a)}):k()},closest:function(a,g){var b=[],q="object"==typeof a&&k(a);this.each(function(w,d){for(;d&&!(q?0<=q.indexOf(d):A.matches(d,a));)d=d!==g&&!(null!=d&&d.nodeType==d.DOCUMENT_NODE)&&d.parentNode;d&&0>b.indexOf(d)&&b.push(d)});return k(b)},parents:function(a){for(var g=[],b=this;0<b.length;)b=k.map(b,function(a){if((a=a.parentNode)&&
(null==a||a.nodeType!=a.DOCUMENT_NODE)&&0>g.indexOf(a))return g.push(a),a});return H(g,a)},parent:function(a){return H(Z(this.pluck("parentNode")),a)},children:function(a){return H(this.map(function(){return G(this)}),a)},contents:function(){return this.map(function(){return this.contentDocument||v.call(this.childNodes)})},siblings:function(a){return H(this.map(function(a,g){return F.call(G(g.parentNode),function(a){return a!==g})}),a)},empty:function(){return this.each(function(){this.innerHTML=
""})},pluck:function(a){return k.map(this,function(g){return g[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display="");if("none"==getComputedStyle(this,"").getPropertyValue("display")){var a=this.style,g=this.nodeName,b,q;z[g]||(b=x.createElement(g),x.body.appendChild(b),q=getComputedStyle(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==q&&(q="block"),z[g]=q);a.display=z[g]}})},replaceWith:function(a){return this.before(a).remove()},
wrap:function(a){var g=f(a);if(this[0]&&!g)var b=k(a).get(0),q=b.parentNode||1<this.length;return this.each(function(w){k(this).wrapAll(g?a.call(this,w):q?b.cloneNode(!0):b)})},wrapAll:function(a){if(this[0]){k(this[0]).before(a=k(a));for(var g;(g=a.children()).length;)a=g.first();k(a).append(this)}return this},wrapInner:function(a){var g=f(a);return this.each(function(b){var q=k(this),w=q.contents();b=g?a.call(this,b):a;w.length?w.wrapAll(b):q.append(b)})},unwrap:function(){this.parent().each(function(){k(this).replaceWith(k(this).children())});
return this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var g=k(this);(a===s?"none"==g.css("display"):a)?g.show():g.hide()})},prev:function(a){return k(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return k(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return 0 in arguments?this.each(function(g){var b=this.innerHTML;k(this).empty().append(C(this,
a,g,b))}):0 in this?this[0].innerHTML:null},text:function(a){return 0 in arguments?this.each(function(g){g=C(this,a,g,this.textContent);this.textContent=null==g?"":""+g}):0 in this?this.pluck("textContent").join(""):null},attr:function(a,g){var b;return"string"!=typeof a||1 in arguments?this.each(function(b){if(1===this.nodeType)if(l(a))for(m in a){var q=m;b=a[m];null==b?this.removeAttribute(q):this.setAttribute(q,b)}else q=a,b=C(this,g,b,this.getAttribute(a)),null==b?this.removeAttribute(q):this.setAttribute(q,
b)}):0 in this&&1==this[0].nodeType&&null!=(b=this[0].getAttribute(a))?b:s},removeAttr:function(a){return this.each(function(){1===this.nodeType&&a.split(" ").forEach(function(a){this.removeAttribute(a)},this)})},prop:function(a,g){a=ba[a]||a;return 1 in arguments?this.each(function(b){this[a]=C(this,g,b,this[a])}):this[0]&&this[0][a]},removeProp:function(a){a=ba[a]||a;return this.each(function(){delete this[a]})},data:function(a,g){var b="data-"+a.replace(X,"-$1").toLowerCase(),b=1 in arguments?
this.attr(b,g):this.attr(b);return null!==b?M(b):s},val:function(a){return 0 in arguments?(null==a&&(a=""),this.each(function(g){this.value=C(this,a,g,this.value)})):this[0]&&(this[0].multiple?k(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(a){if(a)return this.each(function(g){var b=k(this);g=C(this,a,g,b.offset());var q=b.offsetParent().offset();g={top:g.top-q.top,left:g.left-q.left};"static"==b.css("position")&&(g.position="relative");
b.css(g)});if(!this.length)return null;if(x.documentElement!==this[0]&&!k.contains(x.documentElement,this[0]))return{top:0,left:0};var g=this[0].getBoundingClientRect();return{left:g.left+c.pageXOffset,top:g.top+c.pageYOffset,width:Math.round(g.width),height:Math.round(g.height)}},css:function(a,g){if(2>arguments.length){var b=this[0];if("string"==typeof a)return b?b.style[Y(a)]||getComputedStyle(b,"").getPropertyValue(a):void 0;if(V(a)){if(!b)return;var q={},w=getComputedStyle(b,"");k.each(a,function(a,
g){q[g]=b.style[Y(g)]||w.getPropertyValue(g)});return q}}var d="";if("string"==e(a))g||0===g?d=O(a)+":"+("number"!=typeof g||R[O(a)]?g:g+"px"):this.each(function(){this.style.removeProperty(O(a))});else for(m in a)a[m]||0===a[m]?d+=O(m)+":"+("number"!=typeof a[m]||R[O(m)]?a[m]:a[m]+"px")+";":this.each(function(){this.style.removeProperty(O(m))});return this.each(function(){this.style.cssText+=";"+d})},index:function(a){return a?this.indexOf(k(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return a?
B.some.call(this,function(a){return this.test(D(a))},I(a)):!1},addClass:function(a){return a?this.each(function(g){if("className"in this){L=[];var b=D(this);C(this,a,g,b).split(/\s+/g).forEach(function(a){k(this).hasClass(a)||L.push(a)},this);L.length&&D(this,b+(b?" ":"")+L.join(" "))}}):this},removeClass:function(a){return this.each(function(g){if("className"in this){if(a===s)return D(this,"");L=D(this);C(this,a,g,L).split(/\s+/g).forEach(function(a){L=L.replace(I(a)," ")});D(this,L.trim())}})},
toggleClass:function(a,g){return a?this.each(function(b){var q=k(this);C(this,a,b,D(this)).split(/\s+/g).forEach(function(a){(g===s?!q.hasClass(a):g)?q.addClass(a):q.removeClass(a)})}):this},scrollTop:function(a){if(this.length){var g="scrollTop"in this[0];return a===s?g?this[0].scrollTop:this[0].pageYOffset:this.each(g?function(){this.scrollTop=a}:function(){this.scrollTo(this.scrollX,a)})}},scrollLeft:function(a){if(this.length){var g="scrollLeft"in this[0];return a===s?g?this[0].scrollLeft:this[0].pageXOffset:
this.each(g?function(){this.scrollLeft=a}:function(){this.scrollTo(a,this.scrollY)})}},position:function(){if(this.length){var a=this[0],g=this.offsetParent(),b=this.offset(),q=u.test(g[0].nodeName)?{top:0,left:0}:g.offset();b.top-=parseFloat(k(a).css("margin-top"))||0;b.left-=parseFloat(k(a).css("margin-left"))||0;q.top+=parseFloat(k(g[0]).css("border-top-width"))||0;q.left+=parseFloat(k(g[0]).css("border-left-width"))||0;return{top:b.top-q.top,left:b.left-q.left}}},offsetParent:function(){return this.map(function(){for(var a=
this.offsetParent||x.body;a&&!u.test(a.nodeName)&&"static"==k(a).css("position");)a=a.offsetParent;return a})}};k.fn.detach=k.fn.remove;["width","height"].forEach(function(a){var g=a.replace(/./,function(a){return a[0].toUpperCase()});k.fn[a]=function(b){var q,w=this[0];return b===s?h(w)?w["inner"+g]:null!=w&&w.nodeType==w.DOCUMENT_NODE?w.documentElement["scroll"+g]:(q=this.offset())&&q[a]:this.each(function(g){w=k(this);w.css(a,C(this,b,g,w[a]()))})}});["after","prepend","before","append"].forEach(function(a,
g){var b=g%2;k.fn[a]=function(){var a,q=k.map(arguments,function(g){var b=[];a=e(g);return"array"==a?(g.forEach(function(a){if(a.nodeType!==s)return b.push(a);if(k.zepto.isZ(a))return b=b.concat(a.get());b=b.concat(A.fragment(a))}),b):"object"==a||null==g?g:A.fragment(g)}),w,Q=1<this.length;return 1>q.length?this:this.each(function(a,e){w=b?e:e.parentNode;e=0==g?e.nextSibling:1==g?e.firstChild:2==g?e:null;var A=k.contains(x.documentElement,w);q.forEach(function(a){if(Q)a=a.cloneNode(!0);else if(!w)return k(a).remove();
w.insertBefore(a,e);A&&d(a,function(a){if(null!=a.nodeName&&"SCRIPT"===a.nodeName.toUpperCase()&&!(a.type&&"text/javascript"!==a.type||a.src)){var g=a.ownerDocument?a.ownerDocument.defaultView:c;g.eval.call(g,a.innerHTML)}})})})};k.fn[b?a+"To":"insert"+(g?"Before":"After")]=function(g){k(g)[a](this);return this}});A.Z.prototype=r.prototype=k.fn;A.uniq=Z;A.deserializeValue=M;k.zepto=A;return k}();(function(e){function f(d){return d._zid||(d._zid=I++)}function h(d,e,c,x){e=l(e);if(e.ns)var z=RegExp("(?:^| )"+
e.ns.replace(" "," .* ?")+"(?: |$)");return(C[f(d)]||[]).filter(function(d){return d&&(!e.e||d.e==e.e)&&(!e.ns||z.test(d.ns))&&(!c||f(d.fn)===f(c))&&(!x||d.sel==x)})}function l(d){d=(""+d).split(".");return{e:d[0],ns:d.slice(1).sort().join(" ")}}function n(c,h,k,x,z,p,R){var t=f(c),m=C[t]||(C[t]=[]);h.split(/\s/).forEach(function(f){if("ready"==f)return e(document).ready(k);var h=l(f);h.fn=k;h.sel=z;h.e in s&&(k=function(d){var c=d.relatedTarget;if(!c||c!==this&&!e.contains(this,c))return h.fn.apply(this,
arguments)});var F=(h.del=p)||k;h.proxy=function(d){d=y(d);if(!d.isImmediatePropagationStopped()){d.data=x;var e=F.apply(c,d._args==G?[d]:[d].concat(d._args));!1===e&&(d.preventDefault(),d.stopPropagation());return e}};h.i=m.length;m.push(h);"addEventListener"in c&&c.addEventListener(s[h.e]||M&&d[h.e]||h.e,h.proxy,h.del&&!M&&h.e in d||!!R)})}function J(e,c,k,x,z){var U=f(e);(c||"").split(/\s/).forEach(function(c){h(e,c,k,x).forEach(function(c){delete C[U][c.i];"removeEventListener"in e&&e.removeEventListener(s[c.e]||
M&&d[c.e]||c.e,c.proxy,c.del&&!M&&c.e in d||!!z)})})}function y(d,c){if(c||!d.isDefaultPrevented)if(c||(c=d),e.each(B,function(e,f){var h=c[e];d[e]=function(){this[f]=m;return h&&h.apply(c,arguments)};d[f]=k}),d.timeStamp||(d.timeStamp=Date.now()),c.defaultPrevented!==G?c.defaultPrevented:"returnValue"in c?!1===c.returnValue:c.getPreventDefault&&c.getPreventDefault())d.isDefaultPrevented=m;return d}function O(d){var c,e={originalEvent:d};for(c in d)L.test(c)||d[c]===G||(e[c]=d[c]);return y(e,d)}var I=
1,G,r=Array.prototype.slice,K=e.isFunction,H=function(d){return"string"==typeof d},C={},D={},M="onfocusin"in c,d={focus:"focusin",blur:"focusout"},s={mouseenter:"mouseover",mouseleave:"mouseout"};D.click=D.mousedown=D.mouseup=D.mousemove="MouseEvents";e.event={add:n,remove:J};e.proxy=function(d,c){var h=2 in arguments&&r.call(arguments,2);if(K(d)){var x=function(){return d.apply(c,h?h.concat(r.call(arguments)):arguments)};x._zid=f(d);return x}if(H(c))return h?(h.unshift(d[c],d),e.proxy.apply(null,
h)):e.proxy(d[c],d);throw new TypeError("expected function");};e.fn.bind=function(d,c,e){return this.on(d,c,e)};e.fn.unbind=function(d,c){return this.off(d,c)};e.fn.one=function(d,c,e,f){return this.on(d,c,e,f,1)};var m=function(){return!0},k=function(){return!1},L=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,B={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(d,c,e){return this.on(c,
d,e)};e.fn.undelegate=function(d,c,e){return this.off(c,d,e)};e.fn.live=function(d,c){e(document.body).delegate(this.selector,d,c);return this};e.fn.die=function(d,c){e(document.body).undelegate(this.selector,d,c);return this};e.fn.on=function(d,c,f,h,z){var p,R,t=this;if(d&&!H(d))return e.each(d,function(d,e){t.on(d,c,f,e,z)}),t;H(c)||K(h)||!1===h||(h=f,f=c,c=G);if(h===G||!1===f)h=f,f=G;!1===h&&(h=k);return t.each(function(k,t){z&&(p=function(d){J(t,d.type,h);return h.apply(this,arguments)});c&&
(R=function(d){var f,z=e(d.target).closest(c,t).get(0);if(z&&z!==t)return f=e.extend(O(d),{currentTarget:z,liveFired:t}),(p||h).apply(z,[f].concat(r.call(arguments,1)))});n(t,d,h,f,c,R||p)})};e.fn.off=function(d,c,f){var h=this;if(d&&!H(d))return e.each(d,function(d,e){h.off(d,c,e)}),h;H(c)||K(f)||!1===f||(f=c,c=G);!1===f&&(f=k);return h.each(function(){J(this,d,f,c)})};e.fn.trigger=function(c,f){c=H(c)||e.isPlainObject(c)?e.Event(c):y(c);c._args=f;return this.each(function(){if(c.type in d&&"function"==
typeof this[c.type])this[c.type]();else"dispatchEvent"in this?this.dispatchEvent(c):e(this).triggerHandler(c,f)})};e.fn.triggerHandler=function(d,c){var f,x;this.each(function(z,k){f=O(H(d)?e.Event(d):d);f._args=c;f.target=k;e.each(h(k,d.type||d),function(d,c){x=c.proxy(f);if(f.isImmediatePropagationStopped())return!1})});return x};"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(d){e.fn[d]=
function(c){return 0 in arguments?this.bind(d,c):this.trigger(d)}});e.Event=function(d,c){H(d)||(c=d,d=c.type);var e=document.createEvent(D[d]||"Events"),f=!0;if(c)for(var h in c)"bubbles"==h?f=!!c[h]:e[h]=c[h];e.initEvent(d,f,!0);return y(e)}})(N);(function(e){function f(d,c,f,h){if(d.global)return d=c||D,f=e.Event(f),e(d).trigger(f,h),!f.isDefaultPrevented()}function h(d){d.global&&0===e.active++&&f(d,null,"ajaxStart")}function l(d,c){var e=c.context;if(!1===c.beforeSend.call(e,d,c)||!1===f(c,e,
"ajaxBeforeSend",[d,c]))return!1;f(c,e,"ajaxSend",[d,c])}function n(d,c,e,h){var k=e.context;e.success.call(k,d,"success",c);h&&h.resolveWith(k,[d,"success",c]);f(e,k,"ajaxSuccess",[c,e,d]);y("success",c,e)}function J(d,c,e,h,k){var p=h.context;h.error.call(p,e,c,d);k&&k.rejectWith(p,[e,c,d]);f(h,p,"ajaxError",[e,h,d||c]);y(c,e,h)}function y(d,c,h){var k=h.context;h.complete.call(k,c,d);f(h,k,"ajaxComplete",[c,h]);h.global&&!--e.active&&f(h,null,"ajaxStop")}function r(){}function I(d){d&&(d=d.split(";",
2)[0]);return d&&(d==B?"html":d==L?"json":m.test(d)?"script":k.test(d)&&"xml")||"text"}function G(d,c){return""==c?d:(d+"&"+c).replace(/[&?]{1,2}/,"?")}function E(d){d.processData&&d.data&&"string"!=e.type(d.data)&&(d.data=e.param(d.data,d.traditional));!d.data||d.type&&"GET"!=d.type.toUpperCase()&&"jsonp"!=d.dataType||(d.url=G(d.url,d.data),d.data=void 0)}function K(d,c,f,h){e.isFunction(c)&&(h=f,f=c,c=void 0);e.isFunction(f)||(h=f,f=void 0);return{url:d,data:c,success:f,dataType:h}}function H(d,
c,f,h){var k,p=e.isArray(c),l=e.isPlainObject(c);e.each(c,function(c,z){k=e.type(z);h&&(c=f?h:h+"["+(l||"object"==k||"array"==k?c:"")+"]");!h&&p?d.add(z.name,z.value):"array"==k||!f&&"object"==k?H(d,z,f,c):d.add(c,z)})}var C=+new Date,D=c.document,M,d,s=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,m=/^(?:text|application)\/javascript/i,k=/^(?:text|application)\/xml/i,L="application/json",B="text/html",N=/^\s*$/,F=D.createElement("a");F.href=c.location.href;e.active=0;e.ajaxJSONP=function(d,
f){if(!("type"in d))return e.ajax(d);var h=d.jsonpCallback,k=(e.isFunction(h)?h():h)||"Zepto"+C++,p=D.createElement("script"),m=c[k],r,u=function(d){e(p).triggerHandler("error",d||"abort")},s={abort:u},y;f&&f.promise(s);e(p).on("load error",function(h,b){clearTimeout(y);e(p).off().remove();"error"!=h.type&&r?n(r[0],s,d,f):J(null,b||"error",s,d,f);c[k]=m;r&&e.isFunction(m)&&m(r[0]);m=r=void 0});if(!1===l(s,d))return u("abort"),s;c[k]=function(){r=arguments};p.src=d.url.replace(/\?(.+)=\?/,"?$1="+k);
D.head.appendChild(p);0<d.timeout&&(y=setTimeout(function(){u("timeout")},d.timeout));return s};e.ajaxSettings={type:"GET",beforeSend:r,success:r,error:r,complete:r,context:null,global:!0,xhr:function(){return new c.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:L,xml:"application/xml, text/xml",html:B,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:r};e.ajax=function(f){var k=e.extend({},f||{}),m=e.Deferred&&
e.Deferred(),s;for(M in e.ajaxSettings)void 0===k[M]&&(k[M]=e.ajaxSettings[M]);h(k);k.crossDomain||(s=D.createElement("a"),s.href=k.url,s.href=s.href,k.crossDomain=F.protocol+"//"+F.host!==s.protocol+"//"+s.host);k.url||(k.url=c.location.toString());-1<(s=k.url.indexOf("#"))&&(k.url=k.url.slice(0,s));E(k);var t=k.dataType;(s=/\?.+=\?/.test(k.url))&&(t="jsonp");!1!==k.cache&&(f&&!0===f.cache||"script"!=t&&"jsonp"!=t)||(k.url=G(k.url,"_="+Date.now()));if("jsonp"==t)return s||(k.url=G(k.url,k.jsonp?
k.jsonp+"=?":!1===k.jsonp?"":"callback=?")),e.ajaxJSONP(k,m);f=k.accepts[t];var y={};s=function(d,b){y[d.toLowerCase()]=[d,b]};var v=/^([\w-]+:)\/\//.test(k.url)?RegExp.$1:c.location.protocol,u=k.xhr(),B=u.setRequestHeader,C;m&&m.promise(u);k.crossDomain||s("X-Requested-With","XMLHttpRequest");s("Accept",f||"*/*");if(f=k.mimeType||f)-1<f.indexOf(",")&&(f=f.split(",",2)[0]),u.overrideMimeType&&u.overrideMimeType(f);(k.contentType||!1!==k.contentType&&k.data&&"GET"!=k.type.toUpperCase())&&s("Content-Type",
k.contentType||"application/x-www-form-urlencoded");if(k.headers)for(d in k.headers)s(d,k.headers[d]);u.setRequestHeader=s;u.onreadystatechange=function(){if(4==u.readyState){u.onreadystatechange=r;clearTimeout(C);var d,b=!1;if(200<=u.status&&300>u.status||304==u.status||0==u.status&&"file:"==v){t=t||I(k.mimeType||u.getResponseHeader("content-type"));if("arraybuffer"==u.responseType||"blob"==u.responseType)d=u.response;else{d=u.responseText;try{d=k.dataFilter==r?d:k.dataFilter.call(k.context,d,t),
"script"==t?(0,eval)(d):"xml"==t?d=u.responseXML:"json"==t&&(d=N.test(d)?null:e.parseJSON(d))}catch(a){b=a}if(b)return J(b,"parsererror",u,k,m)}n(d,u,k,m)}else J(u.statusText||null,u.status?"error":"abort",u,k,m)}};if(!1===l(u,k))return u.abort(),J(null,"abort",u,k,m),u;u.open(k.type,k.url,"async"in k?k.async:!0,k.username,k.password);if(k.xhrFields)for(d in k.xhrFields)u[d]=k.xhrFields[d];for(d in y)B.apply(u,y[d]);0<k.timeout&&(C=setTimeout(function(){u.onreadystatechange=r;u.abort();J(null,"timeout",
u,k,m)},k.timeout));u.send(k.data?k.data:null);return u};e.get=function(){return e.ajax(K.apply(null,arguments))};e.post=function(){var d=K.apply(null,arguments);d.type="POST";return e.ajax(d)};e.getJSON=function(){var d=K.apply(null,arguments);d.dataType="json";return e.ajax(d)};e.fn.load=function(d,c,f){if(!this.length)return this;var h=this,k=d.split(/\s/),p;d=K(d,c,f);var m=d.success;1<k.length&&(d.url=k[0],p=k[1]);d.success=function(d){h.html(p?e("<div>").html(d.replace(s,"")).find(p):d);m&&
m.apply(h,arguments)};e.ajax(d);return this};var v=encodeURIComponent;e.param=function(d,c){var f=[];f.add=function(d,c){e.isFunction(c)&&(c=c());null==c&&(c="");this.push(v(d)+"="+v(c))};H(f,d,c);return f.join("&").replace(/%20/g,"+")}})(N);(function(c){c.fn.serializeArray=function(){var f,h,l=[],n=function(c){if(c.forEach)return c.forEach(n);l.push({name:f,value:c})};this[0]&&c.each(this[0].elements,function(l,r){h=r.type;(f=r.name)&&"fieldset"!=r.nodeName.toLowerCase()&&!r.disabled&&"submit"!=
h&&"reset"!=h&&"button"!=h&&"file"!=h&&("radio"!=h&&"checkbox"!=h||r.checked)&&n(c(r).val())});return l};c.fn.serialize=function(){var c=[];this.serializeArray().forEach(function(e){c.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))});return c.join("&")};c.fn.submit=function(f){if(0 in arguments)this.bind("submit",f);else if(this.length){var h=c.Event("submit");this.eq(0).trigger(h);h.isDefaultPrevented()||this.get(0).submit()}return this}})(N);(function(){try{getComputedStyle(void 0)}catch(e){var f=
getComputedStyle;c.getComputedStyle=function(c,e){try{return f(c,e)}catch(h){return null}}}})();return N});(function(){function c(a){return function(g,b,c,e){b=s(b,e,4);var f=!v(g)&&d.keys(g),h=(f||g).length,k=0<a?0:h-1;3>arguments.length&&(c=g[f?f[k]:k],k+=a);for(var p=b,m=c;0<=k&&k<h;k+=a)var l=f?f[k]:k,m=p(m,g[l],l,g);return m}}function e(a){return function(g,b,d){b=m(b,d);d=F(g);for(var c=0<a?0:d-1;0<=c&&c<d;c+=a)if(b(g[c],c,g))return c;return-1}}function f(a,g,b){return function(c,e,f){var h=
0,k=F(c);if("number"==typeof f)0<a?h=0<=f?f:Math.max(f+k,h):k=0<=f?Math.min(f+1,k):f+k+1;else if(b&&f&&k)return f=b(c,e),c[f]===e?f:-1;if(e!==e)return f=g(I.call(c,h,k),d.isNaN),0<=f?f+h:-1;for(f=0<a?h:k-1;0<=f&&f<k;f+=a)if(c[f]===e)return f;return-1}}function h(a,g){var b=t.length,c=a.constructor,c=d.isFunction(c)&&c.prototype||y,e="constructor";for(d.has(a,e)&&!d.contains(g,e)&&g.push(e);b--;)e=t[b],e in a&&a[e]!==c[e]&&!d.contains(g,e)&&g.push(e)}var l=this,n=l._,r=Array.prototype,y=Object.prototype,
O=r.push,I=r.slice,G=y.toString,E=y.hasOwnProperty,K=Array.isArray,H=Object.keys,C=Function.prototype.bind,D=Object.create,M=function(){},d=function(a){if(a instanceof d)return a;if(!(this instanceof d))return new d(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=d),exports._=d):l._=d;d.VERSION="1.8.3";var s=function(a,g,b){if(void 0===g)return a;switch(null==b?3:b){case 1:return function(b){return a.call(g,b)};case 2:return function(b,
d){return a.call(g,b,d)};case 3:return function(b,d,q){return a.call(g,b,d,q)};case 4:return function(b,d,q,c){return a.call(g,b,d,q,c)}}return function(){return a.apply(g,arguments)}},m=function(a,g,b){return null==a?d.identity:d.isFunction(a)?s(a,g,b):d.isObject(a)?d.matcher(a):d.property(a)};d.iteratee=function(a,g){return m(a,g,Infinity)};var k=function(a,g){return function(b){var d=arguments.length;if(2>d||null==b)return b;for(var c=1;c<d;c++)for(var e=arguments[c],f=a(e),h=f.length,k=0;k<h;k++){var p=
f[k];g&&void 0!==b[p]||(b[p]=e[p])}return b}},L=function(a){if(!d.isObject(a))return{};if(D)return D(a);M.prototype=a;a=new M;M.prototype=null;return a},B=function(a){return function(g){return null==g?void 0:g[a]}},N=Math.pow(2,53)-1,F=B("length"),v=function(a){a=F(a);return"number"==typeof a&&0<=a&&a<=N};d.each=d.forEach=function(a,g,b){g=s(g,b);var c;if(v(a))for(b=0,c=a.length;b<c;b++)g(a[b],b,a);else{var e=d.keys(a);b=0;for(c=e.length;b<c;b++)g(a[e[b]],e[b],a)}return a};d.map=d.collect=function(a,
g,b){g=m(g,b);b=!v(a)&&d.keys(a);for(var c=(b||a).length,e=Array(c),f=0;f<c;f++){var h=b?b[f]:f;e[f]=g(a[h],h,a)}return e};d.reduce=d.foldl=d.inject=c(1);d.reduceRight=d.foldr=c(-1);d.find=d.detect=function(a,g,b){g=v(a)?d.findIndex(a,g,b):d.findKey(a,g,b);if(void 0!==g&&-1!==g)return a[g]};d.filter=d.select=function(a,g,b){var c=[];g=m(g,b);d.each(a,function(a,b,d){g(a,b,d)&&c.push(a)});return c};d.reject=function(a,g,b){return d.filter(a,d.negate(m(g)),b)};d.every=d.all=function(a,g,b){g=m(g,b);
b=!v(a)&&d.keys(a);for(var c=(b||a).length,e=0;e<c;e++){var f=b?b[e]:e;if(!g(a[f],f,a))return!1}return!0};d.some=d.any=function(a,g,b){g=m(g,b);b=!v(a)&&d.keys(a);for(var c=(b||a).length,e=0;e<c;e++){var f=b?b[e]:e;if(g(a[f],f,a))return!0}return!1};d.contains=d.includes=d.include=function(a,g,b,c){v(a)||(a=d.values(a));if("number"!=typeof b||c)b=0;return 0<=d.indexOf(a,g,b)};d.invoke=function(a,g){var b=I.call(arguments,2),c=d.isFunction(g);return d.map(a,function(a){var d=c?g:a[g];return null==d?
d:d.apply(a,b)})};d.pluck=function(a,g){return d.map(a,d.property(g))};d.where=function(a,g){return d.filter(a,d.matcher(g))};d.findWhere=function(a,g){return d.find(a,d.matcher(g))};d.max=function(a,g,b){var c=-Infinity,e=-Infinity,f;if(null==g&&null!=a){a=v(a)?a:d.values(a);for(var h=0,k=a.length;h<k;h++)b=a[h],b>c&&(c=b)}else g=m(g,b),d.each(a,function(a,b,d){f=g(a,b,d);if(f>e||-Infinity===f&&-Infinity===c)c=a,e=f});return c};d.min=function(a,g,b){var c=Infinity,e=Infinity,f;if(null==g&&null!=
a){a=v(a)?a:d.values(a);for(var h=0,k=a.length;h<k;h++)b=a[h],b<c&&(c=b)}else g=m(g,b),d.each(a,function(a,b,d){f=g(a,b,d);if(f<e||Infinity===f&&Infinity===c)c=a,e=f});return c};d.shuffle=function(a){a=v(a)?a:d.values(a);for(var g=a.length,b=Array(g),c=0,e;c<g;c++)e=d.random(0,c),e!==c&&(b[c]=b[e]),b[e]=a[c];return b};d.sample=function(a,g,b){return null==g||b?(v(a)||(a=d.values(a)),a[d.random(a.length-1)]):d.shuffle(a).slice(0,Math.max(0,g))};d.sortBy=function(a,g,b){g=m(g,b);return d.pluck(d.map(a,
function(a,b,d){return{value:a,index:b,criteria:g(a,b,d)}}).sort(function(a,g){var b=a.criteria,d=g.criteria;if(b!==d){if(b>d||void 0===b)return 1;if(b<d||void 0===d)return-1}return a.index-g.index}),"value")};var x=function(a){return function(g,b,c){var e={};b=m(b,c);d.each(g,function(d,c){var f=b(d,c,g);a(e,d,f)});return e}};d.groupBy=x(function(a,g,b){d.has(a,b)?a[b].push(g):a[b]=[g]});d.indexBy=x(function(a,g,b){a[b]=g});d.countBy=x(function(a,g,b){d.has(a,b)?a[b]++:a[b]=1});d.toArray=function(a){return a?
d.isArray(a)?I.call(a):v(a)?d.map(a,d.identity):d.values(a):[]};d.size=function(a){return null==a?0:v(a)?a.length:d.keys(a).length};d.partition=function(a,g,b){g=m(g,b);var c=[],e=[];d.each(a,function(a,b,d){(g(a,b,d)?c:e).push(a)});return[c,e]};d.first=d.head=d.take=function(a,g,b){return null==a?void 0:null==g||b?a[0]:d.initial(a,a.length-g)};d.initial=function(a,g,b){return I.call(a,0,Math.max(0,a.length-(null==g||b?1:g)))};d.last=function(a,g,b){return null==a?void 0:null==g||b?a[a.length-1]:
d.rest(a,Math.max(0,a.length-g))};d.rest=d.tail=d.drop=function(a,g,b){return I.call(a,null==g||b?1:g)};d.compact=function(a){return d.filter(a,d.identity)};var z=function(a,g,b,c){var e=[],f=0;c=c||0;for(var h=F(a);c<h;c++){var k=a[c];if(v(k)&&(d.isArray(k)||d.isArguments(k))){g||(k=z(k,g,b));var p=0,m=k.length;for(e.length+=m;p<m;)e[f++]=k[p++]}else b||(e[f++]=k)}return e};d.flatten=function(a,g){return z(a,g,!1)};d.without=function(a){return d.difference(a,I.call(arguments,1))};d.uniq=d.unique=
function(a,g,b,c){d.isBoolean(g)||(c=b,b=g,g=!1);null!=b&&(b=m(b,c));c=[];for(var e=[],f=0,h=F(a);f<h;f++){var k=a[f],p=b?b(k,f,a):k;g?(f&&e===p||c.push(k),e=p):b?d.contains(e,p)||(e.push(p),c.push(k)):d.contains(c,k)||c.push(k)}return c};d.union=function(){return d.uniq(z(arguments,!0,!0))};d.intersection=function(a){for(var g=[],b=arguments.length,c=0,e=F(a);c<e;c++){var f=a[c];if(!d.contains(g,f)){for(var h=1;h<b&&d.contains(arguments[h],f);h++);h===b&&g.push(f)}}return g};d.difference=function(a){var g=
z(arguments,!0,!0,1);return d.filter(a,function(a){return!d.contains(g,a)})};d.zip=function(){return d.unzip(arguments)};d.unzip=function(a){for(var g=a&&d.max(a,F).length||0,b=Array(g),c=0;c<g;c++)b[c]=d.pluck(a,c);return b};d.object=function(a,g){for(var b={},d=0,c=F(a);d<c;d++)g?b[a[d]]=g[d]:b[a[d][0]]=a[d][1];return b};d.findIndex=e(1);d.findLastIndex=e(-1);d.sortedIndex=function(a,g,b,d){b=m(b,d,1);g=b(g);d=0;for(var c=F(a);d<c;){var e=Math.floor((d+c)/2);b(a[e])<g?d=e+1:c=e}return d};d.indexOf=
f(1,d.findIndex,d.sortedIndex);d.lastIndexOf=f(-1,d.findLastIndex);d.range=function(a,g,b){null==g&&(g=a||0,a=0);b=b||1;g=Math.max(Math.ceil((g-a)/b),0);for(var d=Array(g),c=0;c<g;c++,a+=b)d[c]=a;return d};var U=function(a,g,b,c,e){if(!(c instanceof g))return a.apply(b,e);g=L(a.prototype);a=a.apply(g,e);return d.isObject(a)?a:g};d.bind=function(a,g){if(C&&a.bind===C)return C.apply(a,I.call(arguments,1));if(!d.isFunction(a))throw new TypeError("Bind must be called on a function");var b=I.call(arguments,
2),c=function(){return U(a,c,g,this,b.concat(I.call(arguments)))};return c};d.partial=function(a){var g=I.call(arguments,1),b=function(){for(var c=0,e=g.length,f=Array(e),h=0;h<e;h++)f[h]=g[h]===d?arguments[c++]:g[h];for(;c<arguments.length;)f.push(arguments[c++]);return U(a,b,this,this,f)};return b};d.bindAll=function(a){var g,b=arguments.length,c;if(1>=b)throw Error("bindAll must be passed function names");for(g=1;g<b;g++)c=arguments[g],a[c]=d.bind(a[c],a);return a};d.memoize=function(a,g){var b=
function(c){var e=b.cache,f=""+(g?g.apply(this,arguments):c);d.has(e,f)||(e[f]=a.apply(this,arguments));return e[f]};b.cache={};return b};d.delay=function(a,b){var d=I.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};d.defer=d.partial(d.delay,d,1);d.throttle=function(a,b,c){var e,f,h,k=null,p=0;c||(c={});var m=function(){p=!1===c.leading?0:d.now();k=null;h=a.apply(e,f);k||(e=f=null)};return function(){var l=d.now();p||!1!==c.leading||(p=l);var n=b-(l-p);e=this;f=arguments;
0>=n||n>b?(k&&(clearTimeout(k),k=null),p=l,h=a.apply(e,f),k||(e=f=null)):k||!1===c.trailing||(k=setTimeout(m,n));return h}};d.debounce=function(a,b,c){var e,f,h,k,p,m=function(){var l=d.now()-k;l<b&&0<=l?e=setTimeout(m,b-l):(e=null,c||(p=a.apply(h,f),e||(h=f=null)))};return function(){h=this;f=arguments;k=d.now();var l=c&&!e;e||(e=setTimeout(m,b));l&&(p=a.apply(h,f),h=f=null);return p}};d.wrap=function(a,b){return d.partial(b,a)};d.negate=function(a){return function(){return!a.apply(this,arguments)}};
d.compose=function(){var a=arguments,b=a.length-1;return function(){for(var d=b,c=a[b].apply(this,arguments);d--;)c=a[d].call(this,c);return c}};d.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}};d.before=function(a,b){var d;return function(){0<--a&&(d=b.apply(this,arguments));1>=a&&(b=null);return d}};d.once=d.partial(d.before,2);var R=!{toString:null}.propertyIsEnumerable("toString"),t="valueOf isPrototypeOf toString propertyIsEnumerable hasOwnProperty toLocaleString".split(" ");
d.keys=function(a){if(!d.isObject(a))return[];if(H)return H(a);var b=[],c;for(c in a)d.has(a,c)&&b.push(c);R&&h(a,b);return b};d.allKeys=function(a){if(!d.isObject(a))return[];var b=[],c;for(c in a)b.push(c);R&&h(a,b);return b};d.values=function(a){for(var b=d.keys(a),c=b.length,e=Array(c),f=0;f<c;f++)e[f]=a[b[f]];return e};d.mapObject=function(a,b,c){b=m(b,c);c=d.keys(a);for(var e=c.length,f={},h,k=0;k<e;k++)h=c[k],f[h]=b(a[h],h,a);return f};d.pairs=function(a){for(var b=d.keys(a),c=b.length,e=Array(c),
f=0;f<c;f++)e[f]=[b[f],a[b[f]]];return e};d.invert=function(a){for(var b={},c=d.keys(a),e=0,f=c.length;e<f;e++)b[a[c[e]]]=c[e];return b};d.functions=d.methods=function(a){var b=[],c;for(c in a)d.isFunction(a[c])&&b.push(c);return b.sort()};d.extend=k(d.allKeys);d.extendOwn=d.assign=k(d.keys);d.findKey=function(a,b,c){b=m(b,c);c=d.keys(a);for(var e,f=0,h=c.length;f<h;f++)if(e=c[f],b(a[e],e,a))return e};d.pick=function(a,b,c){var e={},f=a,h,k;if(null==f)return e;d.isFunction(b)?(k=d.allKeys(f),h=s(b,
c)):(k=z(arguments,!1,!1,1),h=function(a,b,g){return b in g},f=Object(f));for(var p=0,m=k.length;p<m;p++){var l=k[p],n=f[l];h(n,l,f)&&(e[l]=n)}return e};d.omit=function(a,b,c){if(d.isFunction(b))b=d.negate(b);else{var e=d.map(z(arguments,!1,!1,1),String);b=function(a,b){return!d.contains(e,b)}}return d.pick(a,b,c)};d.defaults=k(d.allKeys,!0);d.create=function(a,b){var c=L(a);b&&d.extendOwn(c,b);return c};d.clone=function(a){return d.isObject(a)?d.isArray(a)?a.slice():d.extend({},a):a};d.tap=function(a,
b){b(a);return a};d.isMatch=function(a,b){var c=d.keys(b),e=c.length;if(null==a)return!e;for(var f=Object(a),h=0;h<e;h++){var k=c[h];if(b[k]!==f[k]||!(k in f))return!1}return!0};var P=function(a,b,c,e){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof d&&(a=a._wrapped);b instanceof d&&(b=b._wrapped);var f=G.call(a);if(f!==G.call(b))return!1;switch(f){case "[object RegExp]":case "[object String]":return""+a===""+b;case "[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===
1/b:+a===+b;case "[object Date]":case "[object Boolean]":return+a===+b}f="[object Array]"===f;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var h=a.constructor,k=b.constructor;if(h!==k&&!(d.isFunction(h)&&h instanceof h&&d.isFunction(k)&&k instanceof k)&&"constructor"in a&&"constructor"in b)return!1}c=c||[];e=e||[];for(h=c.length;h--;)if(c[h]===a)return e[h]===b;c.push(a);e.push(b);if(f){h=a.length;if(h!==b.length)return!1;for(;h--;)if(!P(a[h],b[h],c,e))return!1}else{f=d.keys(a);h=f.length;
if(d.keys(b).length!==h)return!1;for(;h--;)if(k=f[h],!d.has(b,k)||!P(a[k],b[k],c,e))return!1}c.pop();e.pop();return!0};d.isEqual=function(a,b){return P(a,b)};d.isEmpty=function(a){return null==a?!0:v(a)&&(d.isArray(a)||d.isString(a)||d.isArguments(a))?0===a.length:0===d.keys(a).length};d.isElement=function(a){return!(!a||1!==a.nodeType)};d.isArray=K||function(a){return"[object Array]"===G.call(a)};d.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a};d.each("Arguments Function String Number Date RegExp Error".split(" "),
function(a){d["is"+a]=function(b){return G.call(b)==="[object "+a+"]"}});d.isArguments(arguments)||(d.isArguments=function(a){return d.has(a,"callee")});"function"!=typeof/./&&"object"!=typeof Int8Array&&(d.isFunction=function(a){return"function"==typeof a||!1});d.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};d.isNaN=function(a){return d.isNumber(a)&&a!==+a};d.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===G.call(a)};d.isNull=function(a){return null===a};d.isUndefined=
function(a){return void 0===a};d.has=function(a,b){return null!=a&&E.call(a,b)};d.noConflict=function(){l._=n;return this};d.identity=function(a){return a};d.constant=function(a){return function(){return a}};d.noop=function(){};d.property=B;d.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}};d.matcher=d.matches=function(a){a=d.extendOwn({},a);return function(b){return d.isMatch(b,a)}};d.times=function(a,b,d){var c=Array(Math.max(0,a));b=s(b,d,1);for(d=0;d<a;d++)c[d]=b(d);
return c};d.random=function(a,b){null==b&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};d.now=Date.now||function(){return(new Date).getTime()};K={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};k=d.invert(K);B=function(a){var b=function(b){return a[b]},c="(?:"+d.keys(a).join("|")+")",e=RegExp(c),f=RegExp(c,"g");return function(a){a=null==a?"":""+a;return e.test(a)?a.replace(f,b):a}};d.escape=B(K);d.unescape=B(k);d.result=function(a,b,c){b=null==a?void 0:a[b];void 0===
b&&(b=c);return d.isFunction(b)?b.call(a):b};var S=0;d.uniqueId=function(a){var b=++S+"";return a?a+b:b};d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var u=/(.)^/,X={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,T=function(a){return"\\"+X[a]};d.template=function(a,b,c){!b&&c&&(b=c);b=d.defaults({},b,d.templateSettings);c=RegExp([(b.escape||u).source,(b.interpolate||u).source,(b.evaluate||
u).source].join("|")+"|$","g");var e=0,f="__p+='";a.replace(c,function(b,g,c,d,h){f+=a.slice(e,h).replace(W,T);e=h+b.length;g?f+="'+\n((__t=("+g+"))==null?'':_.escape(__t))+\n'":c?f+="'+\n((__t=("+c+"))==null?'':__t)+\n'":d&&(f+="';\n"+d+"\n__p+='");return b});f+="';\n";b.variable||(f="with(obj||{}){\n"+f+"}\n");f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var h=new Function(b.variable||"obj","_",f)}catch(k){throw k.source=f,k;
}c=function(a){return h.call(this,a,d)};c.source="function("+(b.variable||"obj")+"){\n"+f+"}";return c};d.chain=function(a){a=d(a);a._chain=!0;return a};var b=function(a,b){return a._chain?d(b).chain():b};d.mixin=function(a){d.each(d.functions(a),function(g){var c=d[g]=a[g];d.prototype[g]=function(){var a=[this._wrapped];O.apply(a,arguments);return b(this,c.apply(d,a))}})};d.mixin(d);d.each("pop push reverse shift sort splice unshift".split(" "),function(a){var g=r[a];d.prototype[a]=function(){var c=
this._wrapped;g.apply(c,arguments);"shift"!==a&&"splice"!==a||0!==c.length||delete c[0];return b(this,c)}});d.each(["concat","join","slice"],function(a){var g=r[a];d.prototype[a]=function(){return b(this,g.apply(this._wrapped,arguments))}});d.prototype.value=function(){return this._wrapped};d.prototype.valueOf=d.prototype.toJSON=d.prototype.value;d.prototype.toString=function(){return""+this._wrapped};"function"===typeof define&&define.amd&&define("underscore",[],function(){return d})}).call(this);
(function(c){var e="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;if("function"===typeof define&&define.amd)h.define(["underscore","jquery","exports"],function(f,h,p){e.Backbone=c(e,p,f,h)});else if("undefined"!==typeof exports){var f=require("underscore"),p;try{p=require("jquery")}catch(l){}c(e,exports,f,p)}else e.Backbone=c(e,{},e._,N)})(function(c,e,f,h){var l=c.Backbone,n=Array.prototype.slice;e.VERSION="1.3.3";e.$=h;e.noConflict=function(){c.Backbone=
l;return this};e.emulateHTTP=!1;e.emulateJSON=!1;var J=function(b,a,g){switch(b){case 1:return function(){return f[a](this[g])};case 2:return function(b){return f[a](this[g],b)};case 3:return function(b,c){return f[a](this[g],O(b,this),c)};case 4:return function(b,c,d){return f[a](this[g],O(b,this),c,d)};default:return function(){var b=n.call(arguments);b.unshift(this[g]);return f[a].apply(f,b)}}},y=function(b,a,g){f.each(a,function(a,c){f[c]&&(b.prototype[c]=J(a,c,g))})},O=function(b,a){return f.isFunction(b)?
b:f.isObject(b)&&!a._isModel(b)?I(b):f.isString(b)?function(a){return a.get(b)}:b},I=function(b){var a=f.matches(b);return function(b){return a(b.attributes)}};h=e.Events={};var G=/\s+/,E=function(b,a,g,c,d){var e=0,h;if(g&&"object"===typeof g)for(void 0!==c&&("context"in d)&&void 0===d.context&&(d.context=c),h=f.keys(g);e<h.length;e++)a=E(b,a,h[e],g[h[e]],d);else if(g&&G.test(g))for(h=g.split(G);e<h.length;e++)a=b(a,h[e],c,d);else a=b(a,g,c,d);return a};h.on=function(b,a,g){return K(this,b,a,g)};
var K=function(b,a,g,c,d){b._events=E(H,b._events||{},a,g,{context:c,ctx:b,listening:d});d&&((b._listeners||(b._listeners={}))[d.id]=d);return b};h.listenTo=function(b,a,g){if(!b)return this;var c=b._listenId||(b._listenId=f.uniqueId("l")),d=this._listeningTo||(this._listeningTo={}),e=d[c];e||(e=this._listenId||(this._listenId=f.uniqueId("l")),e=d[c]={obj:b,objId:c,id:e,listeningTo:d,count:0});K(b,a,g,this,e);return this};var H=function(b,a,g,c){if(g){a=b[a]||(b[a]=[]);var d=c.context,e=c.ctx;(c=
c.listening)&&c.count++;a.push({callback:g,context:d,ctx:d||e,listening:c})}return b};h.off=function(b,a,c){if(!this._events)return this;this._events=E(C,this._events,b,a,{context:c,listeners:this._listeners});return this};h.stopListening=function(b,a,c){var d=this._listeningTo;if(!d)return this;b=b?[b._listenId]:f.keys(d);for(var e=0;e<b.length;e++){var h=d[b[e]];if(!h)break;h.obj.off(a,c,this)}return this};var C=function(b,a,c,d){if(b){var e=0,h,k=d.context;d=d.listeners;if(a||c||k){for(var p=a?
[a]:f.keys(b);e<p.length;e++){a=p[e];var l=b[a];if(!l)break;for(var m=[],n=0;n<l.length;n++)h=l[n],c&&c!==h.callback&&c!==h.callback._callback||k&&k!==h.context?m.push(h):(h=h.listening)&&0===--h.count&&(delete d[h.id],delete h.listeningTo[h.objId]);m.length?b[a]=m:delete b[a]}return b}for(b=f.keys(d);e<b.length;e++)h=d[b[e]],delete d[h.id],delete h.listeningTo[h.objId]}};h.once=function(b,a,c){var d=E(D,{},b,a,f.bind(this.off,this));"string"===typeof b&&null==c&&(a=void 0);return this.on(d,a,c)};
h.listenToOnce=function(b,a,c){a=E(D,{},a,c,f.bind(this.stopListening,this,b));return this.listenTo(b,a)};var D=function(b,a,c,d){if(c){var e=b[a]=f.once(function(){d(a,e);c.apply(this,arguments)});e._callback=c}return b};h.trigger=function(b){if(!this._events)return this;for(var a=Math.max(0,arguments.length-1),c=Array(a),d=0;d<a;d++)c[d]=arguments[d+1];E(M,this._events,b,void 0,c);return this};var M=function(b,a,c,e){if(b){c=b[a];var f=b.all;c&&f&&(f=f.slice());c&&d(c,e);f&&d(f,[a].concat(e))}return b},
d=function(b,a){var c,d=-1,e=b.length,f=a[0],h=a[1],k=a[2];switch(a.length){case 0:for(;++d<e;)(c=b[d]).callback.call(c.ctx);break;case 1:for(;++d<e;)(c=b[d]).callback.call(c.ctx,f);break;case 2:for(;++d<e;)(c=b[d]).callback.call(c.ctx,f,h);break;case 3:for(;++d<e;)(c=b[d]).callback.call(c.ctx,f,h,k);break;default:for(;++d<e;)(c=b[d]).callback.apply(c.ctx,a)}};h.bind=h.on;h.unbind=h.off;f.extend(e,h);var s=e.Model=function(b,a){var c=b||{};a||(a={});this.cid=f.uniqueId(this.cidPrefix);this.attributes=
{};a.collection&&(this.collection=a.collection);a.parse&&(c=this.parse(c,a)||{});var d=f.result(this,"defaults"),c=f.defaults(f.extend({},d,c),d);this.set(c,a);this.changed={};this.initialize.apply(this,arguments)};f.extend(s.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(b){return f.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(b){return this.attributes[b]},escape:function(b){return f.escape(this.get(b))},
has:function(b){return null!=this.get(b)},matches:function(b){return!!f.iteratee(b,this)(this.attributes)},set:function(b,a,c){if(null==b)return this;var d;"object"===typeof b?(d=b,c=a):(d={})[b]=a;c||(c={});if(!this._validate(d,c))return!1;var e=c.unset;b=c.silent;var h=[],k=this._changing;this._changing=!0;k||(this._previousAttributes=f.clone(this.attributes),this.changed={});var p=this.attributes,l=this.changed,m=this._previousAttributes,n;for(n in d)a=d[n],f.isEqual(p[n],a)||h.push(n),f.isEqual(m[n],
a)?delete l[n]:l[n]=a,e?delete p[n]:p[n]=a;this.idAttribute in d&&(this.id=this.get(this.idAttribute));if(!b)for(h.length&&(this._pending=c),a=0;a<h.length;a++)this.trigger("change:"+h[a],this,p[h[a]],c);if(k)return this;if(!b)for(;this._pending;)c=this._pending,this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(b,a){return this.set(b,void 0,f.extend({},a,{unset:!0}))},clear:function(b){var a={},c;for(c in this.attributes)a[c]=void 0;return this.set(a,
f.extend({},b,{unset:!0}))},hasChanged:function(b){return null==b?!f.isEmpty(this.changed):f.has(this.changed,b)},changedAttributes:function(b){if(!b)return this.hasChanged()?f.clone(this.changed):!1;var a=this._changing?this._previousAttributes:this.attributes,c={},d;for(d in b){var e=b[d];f.isEqual(a[d],e)||(c[d]=e)}return f.size(c)?c:!1},previous:function(b){return null!=b&&this._previousAttributes?this._previousAttributes[b]:null},previousAttributes:function(){return f.clone(this._previousAttributes)},
fetch:function(b){b=f.extend({parse:!0},b);var a=this,c=b.success;b.success=function(d){var e=b.parse?a.parse(d,b):d;if(!a.set(e,b))return!1;c&&c.call(b.context,a,d,b);a.trigger("sync",a,d,b)};T(this,b);return this.sync("read",this,b)},save:function(b,a,c){var d;null==b||"object"===typeof b?(d=b,c=a):(d={})[b]=a;c=f.extend({validate:!0,parse:!0},c);var e=c.wait;if(d&&!e){if(!this.set(d,c))return!1}else if(!this._validate(d,c))return!1;var h=this,k=c.success,p=this.attributes;c.success=function(a){h.attributes=
p;var b=c.parse?h.parse(a,c):a;e&&(b=f.extend({},d,b));if(b&&!h.set(b,c))return!1;k&&k.call(c.context,h,a,c);h.trigger("sync",h,a,c)};T(this,c);d&&e&&(this.attributes=f.extend({},p,d));b=this.isNew()?"create":c.patch?"patch":"update";"patch"!==b||c.attrs||(c.attrs=d);b=this.sync(b,this,c);this.attributes=p;return b},destroy:function(b){b=b?f.clone(b):{};var a=this,c=b.success,d=b.wait,e=function(){a.stopListening();a.trigger("destroy",a,a.collection,b)};b.success=function(f){d&&e();c&&c.call(b.context,
a,f,b);a.isNew()||a.trigger("sync",a,f,b)};var h=!1;this.isNew()?f.defer(b.success):(T(this,b),h=this.sync("delete",this,b));d||e();return h},url:function(){var b=f.result(this,"urlRoot")||f.result(this.collection,"url")||W();if(this.isNew())return b;var a=this.get(this.idAttribute);return b.replace(/[^\/]$/,"$&/")+encodeURIComponent(a)},parse:function(b,a){return b},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(b){return this._validate({},
f.extend({},b,{validate:!0}))},_validate:function(b,a){if(!a.validate||!this.validate)return!0;b=f.extend({},this.attributes,b);var c=this.validationError=this.validate(b,a)||null;if(!c)return!0;this.trigger("invalid",this,c,f.extend(a,{validationError:c}));return!1}});y(s,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var m=e.Collection=function(b,a){a||(a={});a.model&&(this.model=a.model);void 0!==a.comparator&&(this.comparator=a.comparator);this._reset();this.initialize.apply(this,
arguments);b&&this.reset(b,f.extend({silent:!0},a))},k={add:!0,remove:!0,merge:!0},L={add:!0,remove:!1},B=function(b,a,c){c=Math.min(Math.max(c,0),b.length);var d=Array(b.length-c),e=a.length,f;for(f=0;f<d.length;f++)d[f]=b[f+c];for(f=0;f<e;f++)b[f+c]=a[f];for(f=0;f<d.length;f++)b[f+e+c]=d[f]};f.extend(m.prototype,h,{model:s,initialize:function(){},toJSON:function(b){return this.map(function(a){return a.toJSON(b)})},sync:function(){return e.sync.apply(this,arguments)},add:function(b,a){return this.set(b,
f.extend({merge:!1},a,L))},remove:function(b,a){a=f.extend({},a);var c=!f.isArray(b);b=c?[b]:b.slice();var d=this._removeModels(b,a);!a.silent&&d.length&&(a.changes={added:[],merged:[],removed:d},this.trigger("update",this,a));return c?d[0]:d},set:function(b,a){if(null!=b){a=f.extend({},k,a);a.parse&&!this._isModel(b)&&(b=this.parse(b,a)||[]);var c=!f.isArray(b);b=c?[b]:b.slice();var d=a.at;null!=d&&(d=+d);d>this.length&&(d=this.length);0>d&&(d+=this.length+1);var e=[],h=[],p=[],l=[],m={},n=a.add,
s=a.merge,r=a.remove,u=!1,x=this.comparator&&null==d&&!1!==a.sort,z=f.isString(this.comparator)?this.comparator:null,t,v;for(v=0;v<b.length;v++){t=b[v];var y=this.get(t);y?(s&&t!==y&&(t=this._isModel(t)?t.attributes:t,a.parse&&(t=y.parse(t,a)),y.set(t,a),p.push(y),x&&!u&&(u=y.hasChanged(z))),m[y.cid]||(m[y.cid]=!0,e.push(y)),b[v]=y):n&&(t=b[v]=this._prepareModel(t,a))&&(h.push(t),this._addReference(t,a),m[t.cid]=!0,e.push(t))}if(r){for(v=0;v<this.length;v++)t=this.models[v],m[t.cid]||l.push(t);l.length&&
this._removeModels(l,a)}m=!1;e.length&&!x&&n&&r?(m=this.length!==e.length||f.some(this.models,function(a,b){return a!==e[b]}),this.models.length=0,B(this.models,e,0),this.length=this.models.length):h.length&&(x&&(u=!0),B(this.models,h,null==d?this.length:d),this.length=this.models.length);u&&this.sort({silent:!0});if(!a.silent){for(v=0;v<h.length;v++)null!=d&&(a.index=d+v),t=h[v],t.trigger("add",t,this,a);(u||m)&&this.trigger("sort",this,a);if(h.length||l.length||p.length)a.changes={added:h,removed:l,
merged:p},this.trigger("update",this,a)}return c?b[0]:b}},reset:function(b,a){a=a?f.clone(a):{};for(var c=0;c<this.models.length;c++)this._removeReference(this.models[c],a);a.previousModels=this.models;this._reset();b=this.add(b,f.extend({silent:!0},a));a.silent||this.trigger("reset",this,a);return b},push:function(b,a){return this.add(b,f.extend({at:this.length},a))},pop:function(b){var a=this.at(this.length-1);return this.remove(a,b)},unshift:function(b,a){return this.add(b,f.extend({at:0},a))},
shift:function(b){var a=this.at(0);return this.remove(a,b)},slice:function(){return n.apply(this.models,arguments)},get:function(b){return null==b?void 0:this._byId[b]||this._byId[this.modelId(b.attributes||b)]||b.cid&&this._byId[b.cid]},has:function(b){return null!=this.get(b)},at:function(b){0>b&&(b+=this.length);return this.models[b]},where:function(b,a){return this[a?"find":"filter"](b)},findWhere:function(b){return this.where(b,!0)},sort:function(b){var a=this.comparator;if(!a)throw Error("Cannot sort a set without a comparator");
b||(b={});var c=a.length;f.isFunction(a)&&(a=f.bind(a,this));1===c||f.isString(a)?this.models=this.sortBy(a):this.models.sort(a);b.silent||this.trigger("sort",this,b);return this},pluck:function(b){return this.map(b+"")},fetch:function(b){b=f.extend({parse:!0},b);var a=b.success,c=this;b.success=function(d){c[b.reset?"reset":"set"](d,b);a&&a.call(b.context,c,d,b);c.trigger("sync",c,d,b)};T(this,b);return this.sync("read",this,b)},create:function(b,a){a=a?f.clone(a):{};var c=a.wait;b=this._prepareModel(b,
a);if(!b)return!1;c||this.add(b,a);var d=this,e=a.success;a.success=function(a,b,f){c&&d.add(a,f);e&&e.call(f.context,a,b,f)};b.save(null,a);return b},parse:function(b,a){return b},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(b){return b[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(b,a){if(this._isModel(b))return b.collection||(b.collection=
this),b;a=a?f.clone(a):{};a.collection=this;var c=new this.model(b,a);if(!c.validationError)return c;this.trigger("invalid",this,c.validationError,a);return!1},_removeModels:function(b,a){for(var c=[],d=0;d<b.length;d++){var e=this.get(b[d]);if(e){var f=this.indexOf(e);this.models.splice(f,1);this.length--;delete this._byId[e.cid];var h=this.modelId(e.attributes);null!=h&&delete this._byId[h];a.silent||(a.index=f,e.trigger("remove",e,this,a));c.push(e);this._removeReference(e,a)}}return c},_isModel:function(b){return b instanceof
s},_addReference:function(b,a){this._byId[b.cid]=b;var c=this.modelId(b.attributes);null!=c&&(this._byId[c]=b);b.on("all",this._onModelEvent,this)},_removeReference:function(b,a){delete this._byId[b.cid];var c=this.modelId(b.attributes);null!=c&&delete this._byId[c];this===b.collection&&delete b.collection;b.off("all",this._onModelEvent,this)},_onModelEvent:function(b,a,c,d){if(a){if(("add"===b||"remove"===b)&&c!==this)return;"destroy"===b&&this.remove(a,d);if("change"===b){var e=this.modelId(a.previousAttributes()),
f=this.modelId(a.attributes);e!==f&&(null!=e&&delete this._byId[e],null!=f&&(this._byId[f]=a))}}this.trigger.apply(this,arguments)}});y(m,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,
partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var y=e.View=function(b){this.cid=f.uniqueId("view");f.extend(this,f.pick(b,F));this._ensureElement();this.initialize.apply(this,arguments)},N=/^(\S+)\s*(.*)$/,F="model collection el id attributes className tagName events".split(" ");f.extend(y.prototype,h,{tagName:"div",$:function(b){return this.$el.find(b)},initialize:function(){},render:function(){return this},remove:function(){this._removeElement();this.stopListening();
return this},_removeElement:function(){this.$el.remove()},setElement:function(b){this.undelegateEvents();this._setElement(b);this.delegateEvents();return this},_setElement:function(b){this.$el=b instanceof e.$?b:e.$(b);this.el=this.$el[0]},delegateEvents:function(b){b||(b=f.result(this,"events"));if(!b)return this;this.undelegateEvents();for(var a in b){var c=b[a];f.isFunction(c)||(c=this[c]);if(c){var d=a.match(N);this.delegate(d[1],d[2],f.bind(c,this))}}return this},delegate:function(b,a,c){this.$el.on(b+
".delegateEvents"+this.cid,a,c);return this},undelegateEvents:function(){this.$el&&this.$el.off(".delegateEvents"+this.cid);return this},undelegate:function(b,a,c){this.$el.off(b+".delegateEvents"+this.cid,a,c);return this},_createElement:function(b){return document.createElement(b)},_ensureElement:function(){if(this.el)this.setElement(f.result(this,"el"));else{var b=f.extend({},f.result(this,"attributes"));this.id&&(b.id=f.result(this,"id"));this.className&&(b["class"]=f.result(this,"className"));
this.setElement(this._createElement(f.result(this,"tagName")));this._setAttributes(b)}},_setAttributes:function(b){this.$el.attr(b)}});e.sync=function(b,a,c){var d=v[b];f.defaults(c||(c={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var h={type:d,dataType:"json"};c.url||(h.url=f.result(a,"url")||W());null!=c.data||!a||"create"!==b&&"update"!==b&&"patch"!==b||(h.contentType="application/json",h.data=JSON.stringify(c.attrs||a.toJSON(c)));c.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",
h.data=h.data?{model:h.data}:{});if(c.emulateHTTP&&("PUT"===d||"DELETE"===d||"PATCH"===d)){h.type="POST";c.emulateJSON&&(h.data._method=d);var k=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(k)return k.apply(this,arguments)}}"GET"===h.type||c.emulateJSON||(h.processData=!1);var p=c.error;c.error=function(a,b,d){c.textStatus=b;c.errorThrown=d;p&&p.call(c.context,a,b,d)};b=c.xhr=e.ajax(f.extend(h,c));a.trigger("request",a,b,c);return b};var v={create:"POST",
update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var x=e.Router=function(b){b||(b={});b.routes&&(this.routes=b.routes);this._bindRoutes();this.initialize.apply(this,arguments)},z=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,R=/\*\w+/g,t=/[\-{}\[\]+?.,\\\^$|#\s]/g;f.extend(x.prototype,h,{initialize:function(){},route:function(b,a,c){f.isRegExp(b)||(b=this._routeToRegExp(b));f.isFunction(a)&&(c=a,a="");c||(c=this[a]);var d=this;e.history.route(b,function(f){f=
d._extractParameters(b,f);!1!==d.execute(c,f,a)&&(d.trigger.apply(d,["route:"+a].concat(f)),d.trigger("route",a,f),e.history.trigger("route",d,a,f))});return this},execute:function(b,a,c){b&&b.apply(this,a)},navigate:function(b,a){e.history.navigate(b,a);return this},_bindRoutes:function(){if(this.routes){this.routes=f.result(this,"routes");for(var b,a=f.keys(this.routes);null!=(b=a.pop());)this.route(b,this.routes[b])}},_routeToRegExp:function(b){b=b.replace(t,"\\$&").replace(z,"(?:$1)?").replace(S,
function(a,b){return b?a:"([^/?]+)"}).replace(R,"([^?]*?)");return RegExp("^"+b+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(b,a){var c=b.exec(a).slice(1);return f.map(c,function(a,b){return b===c.length-1?a||null:a?decodeURIComponent(a):null})}});var P=e.History=function(){this.handlers=[];this.checkUrl=f.bind(this.checkUrl,this);"undefined"!==typeof r&&(this.location=r.location,this.history=r.history)},$=/^[#\/]|\s+$/g,u=/^\/+|\/+$/g,X=/#.*$/;P.started=!1;f.extend(P.prototype,h,{interval:50,
atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(b){return decodeURI(b.replace(/%25/g,"%2525"))},getSearch:function(){var b=this.location.href.replace(/#.*/,"").match(/\?.+/);return b?b[0]:""},getHash:function(b){return(b=(b||this).location.href.match(/#(.*)$/))?b[1]:""},getPath:function(){var b=this.decodeFragment(this.location.pathname+
this.getSearch()).slice(this.root.length-1);return"/"===b.charAt(0)?b.slice(1):b},getFragment:function(b){null==b&&(b=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash());return b.replace($,"")},start:function(b){if(P.started)throw Error("Backbone.history has already been started");P.started=!0;this.options=f.extend({root:"/"},this.options,b);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._hasHashChange="onhashchange"in r&&(void 0===document.documentMode||
7<document.documentMode);this._useHashChange=this._wantsHashChange&&this._hasHashChange;this._wantsPushState=!!this.options.pushState;this._hasPushState=!(!this.history||!this.history.pushState);this._usePushState=this._wantsPushState&&this._hasPushState;this.fragment=this.getFragment();this.root=("/"+this.root+"/").replace(u,"/");if(this._wantsHashChange&&this._wantsPushState)if(this._hasPushState||this.atRoot())this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0});else return b=
this.root.slice(0,-1)||"/",this.location.replace(b+"#"+this.getPath()),!0;this._hasHashChange||!this._wantsHashChange||this._usePushState||(this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1,b=document.body,b=b.insertBefore(this.iframe,b.firstChild).contentWindow,b.document.open(),b.document.close(),b.location.hash="#"+this.fragment);b=r.addEventListener||function(a,b){return attachEvent("on"+a,b)};this._usePushState?
b("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?b("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));if(!this.options.silent)return this.loadUrl()},stop:function(){var b=r.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._usePushState?b("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&b("hashchange",this.checkUrl,!1);this.iframe&&(document.body.removeChild(this.iframe),this.iframe=
null);this._checkUrlInterval&&clearInterval(this._checkUrlInterval);P.started=!1},route:function(b,a){this.handlers.unshift({route:b,callback:a})},checkUrl:function(b){b=this.getFragment();b===this.fragment&&this.iframe&&(b=this.getHash(this.iframe.contentWindow));if(b===this.fragment)return!1;this.iframe&&this.navigate(b);this.loadUrl()},loadUrl:function(b){if(!this.matchRoot())return!1;b=this.fragment=this.getFragment(b);return f.some(this.handlers,function(a){if(a.route.test(b))return a.callback(b),
!0})},navigate:function(b,a){if(!P.started)return!1;a&&!0!==a||(a={trigger:!!a});b=this.getFragment(b||"");var c=this.root;if(""===b||"?"===b.charAt(0))c=c.slice(0,-1)||"/";c+=b;b=this.decodeFragment(b.replace(X,""));if(this.fragment!==b){this.fragment=b;if(this._usePushState)this.history[a.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,b,a.replace),this.iframe&&b!==this.getHash(this.iframe.contentWindow)&&(c=this.iframe.contentWindow,
a.replace||(c.document.open(),c.document.close()),this._updateHash(c.location,b,a.replace));else return this.location.assign(c);if(a.trigger)return this.loadUrl(b)}},_updateHash:function(b,a,c){c?(c=b.href.replace(/(javascript:|#).*$/,""),b.replace(c+"#"+a)):b.hash="#"+a}});e.history=new P;s.extend=m.extend=x.extend=y.extend=P.extend=function(b,a){var c=this,d;d=b&&f.has(b,"constructor")?b.constructor:function(){return c.apply(this,arguments)};f.extend(d,c,a);d.prototype=f.create(c.prototype,b);d.prototype.constructor=
d;d.__super__=c.prototype;return d};var W=function(){throw Error('A "url" property or function must be specified');},T=function(b,a){var c=a.error;a.error=function(d){c&&c.call(a.context,b,d,a);b.trigger("error",b,d,a)}};return e});var l=r._.noConflict(),S=r.Backbone.noConflict(),n=N,h={};h.core=h.core||{};h.core.LOGGING_ENABLED=!0;h.core.log=function(){if(h.core.LOGGING_ENABLED&&"undefined"!==typeof console&&!l.isNull(console)&&"function"===typeof console.log){var c=["[Klaviyo / Onsite]"].concat([].slice.call(arguments));
console.log.apply(console,c)}};h.core.parseQueryString=function(c){for(var e={},f=/\+/g,h=/([^&=]+)=?([^&]*)/g,l;l=h.exec(c);)e[decodeURIComponent(l[1].replace(f," "))]=decodeURIComponent(l[2].replace(f," "));return e};h.core.insertCSS=function(c){var e=document.createElement("style");n("head").get(0).appendChild(e);e.styleSheet?e.styleSheet.cssText=c:e.appendChild(document.createTextNode(c))};h.core.templates={_cache:{},register:function(c,e){this._cache[c]=l.template(e)},render:function(c,e){return this._cache[c](e||
{})}};h.platforms=h.platforms||{};h.platforms.shopify=h.platforms.shopify||{};h.platforms.shopify.ADD_TO_CART_FORM_ID='form[action="/cart/add"]';h.platforms.shopify.ADD_TO_CART_BUTTON_ID=h.platforms.shopify.ADD_TO_CART_FORM_ID+' button[type="submit"]';h.platforms.shopify.isProductPage=function(c){c||(c=r.location.toString());return!!c.match(/\/products\//)};h.platforms.shopify.isCollectionsPage=function(c){c||(c=r.location.toString());return!!c.match(/\/collections\//)};h.platforms.shopify.isVariantOutOfStock=
function(c,e,f){return h.platforms.shopify.isVariantOutOfInventory(e,f)&&h.platforms.shopify.isVariantUnavailableBasedOnInventoryManagementPolicy(e,f)&&h.platforms.shopify.isVariantUnavailableBasedOnPreorderPolicy(e,f)&&h.platforms.shopify.isVariantUnavailableBasedOnSellThroughPolicy(e,f)&&h.platforms.shopify.isVariantIncludedBasedOnTags(c,f.include_on_tags,f.exclude_on_tags)};h.platforms.shopify.isVariantOutOfInventory=function(c,e){return l.isNull(c.inventory_quantity)||l.isUndefined(c.inventory_quantity)?
!c.available:c.inventory_quantity<e.inventory_quantity_threshold};h.platforms.shopify.isVariantUnavailableBasedOnInventoryManagementPolicy=function(c,e){return e.is_allow_for_unmanaged_inventory?!0:!!c.inventory_management};h.platforms.shopify.isVariantUnavailableBasedOnPreorderPolicy=function(c,e){return e.is_allow_for_preorder?!0:!c.available};h.platforms.shopify.isVariantUnavailableBasedOnSellThroughPolicy=function(c,e){return e.display_on_policy_continue||"continue"!=c.inventory_policy?!0:!1};
h.platforms.shopify.isVariantIncludedBasedOnTags=function(c,e,f){return f.length&&c.tags.length&&l.intersection(c.tags,f).length||e.length&&(!l.intersection(c.tags,e).length||!c.tags.length)?!1:!0};h.platforms.shopify.findSelectedVariantId=function(){var c=r.location.search.substring(1);return(c=h.core.parseQueryString(c).variant)?c:n('[name="id"]').val()};h.platforms.shopify.productDetailsUrl=function(c){return l.isUndefined(c.product_handle)?"//"+r.location.hostname.toString()+r.location.pathname.toString()+
".js":"//"+r.location.hostname.toString()+"/products/"+c.product_handle+".js"};h.platforms.shopify.format_product_json=function(c){return c};h.platforms.bigcommerce=h.platforms.bigcommerce||{};h.platforms.bigcommerce.ADD_TO_CART_FORM_ID='form[action="https://'+r.location.hostname+'/cart.php"]';h.platforms.bigcommerce.ADD_TO_CART_BUTTON_ID=h.platforms.bigcommerce.ADD_TO_CART_FORM_ID+' input[type="submit"]';h.platforms.bigcommerce.INVENTORY_TRACKING_TYPES=["simple","product","variant","sku"];h.platforms.bigcommerce.OPTION_NAME_ELEMENT=
'input[name^="attribute"]';h.platforms.bigcommerce.PRODUCT_ID_ELEMENT='input[name="product_id"]';h.platforms.bigcommerce.isProductPage=function(c){try{return page_type=document.querySelector("meta[property='og:type']").getAttribute("content"),"product"==page_type}catch(e){return!1}};h.platforms.bigcommerce.isCollectionsPage=function(c){return!1};h.platforms.bigcommerce.isVariantOutOfStock=function(c,e,f){return h.platforms.bigcommerce.isVariantTrackableBasedOnInventoryManagementPolicy(c)&&h.platforms.bigcommerce.isVariantOutOfInventory(e,
f)&&h.platforms.bigcommerce.isVariantAvailable(e,f)&&h.platforms.bigcommerce.isVariantIncludedBasedOnTags(c,f.include_on_tags,f.exclude_on_tags)};h.platforms.bigcommerce.isVariantOutOfInventory=function(c,e){return l.isNull(c.inventory_quantity)||l.isUndefined(c.inventory_quantity)?!c.available:c.inventory_quantity<e.inventory_quantity_threshold};h.platforms.bigcommerce.isVariantTrackableBasedOnInventoryManagementPolicy=function(c){return h.platforms.bigcommerce.INVENTORY_TRACKING_TYPES.includes(c.inventory_policy)};
h.platforms.bigcommerce.isVariantAvailable=function(c,e){return c.available};h.platforms.bigcommerce.isVariantIncludedBasedOnTags=function(c,e,f){return f.length&&c.tags.length&&l.intersection(c.tags,f).length||e.length&&(!l.intersection(c.tags,e).length||!c.tags.length)?!1:!0};h.platforms.bigcommerce.findSelectedVariantId=function(){var c=[],e=n(h.platforms.bigcommerce.ADD_TO_CART_FORM_ID+" "+h.platforms.bigcommerce.OPTION_NAME_ELEMENT+":checked");h.platforms.bigcommerce.selected_variant_id=null;
if(!l.isEmpty(e))return l.each(e,function(e,h){c.push(e.name+"="+n(e).val())}),product_id=h.platforms.bigcommerce.productId(),variant_option_url="//"+r.location.hostname+"/remote/v1/product-attributes/"+product_id,parameters="action=add&qty[]=1&product_id="+product_id+"&"+c.join("&"),parameters=encodeURI(parameters),n.ajax({url:variant_option_url,type:"POST",dataType:"json",data:parameters,success:function(c){try{c.data.purchasable&&(h.platforms.bigcommerce.selected_variant_id=c.data.v3_variant_id)}catch(e){}}}),
null};h.platforms.bigcommerce.productId=function(){product_id_element=h.platforms.bigcommerce.ADD_TO_CART_FORM_ID+" "+h.platforms.bigcommerce.PRODUCT_ID_ELEMENT;return n(product_id_element).val()};h.platforms.bigcommerce.productDetailsUrl=function(c){product_id=h.platforms.bigcommerce.productId();return"https://fast.a.klaviyo.com/api/v1/catalog/bigcommerce/product-variants?a="+c.account_id+"&p="+product_id};h.platforms.bigcommerce.format_product_json=function(c){data=c.data;product={id:data.product_id,
title:data.product_title,inventory_policy:data.inventory_tracking,variants:[]};l.each(data.variants,function(c,f){variant_title=l.isEmpty(c.title)?c.sku:c.title;product.variants.push({id:c.external_id,title:variant_title,available:c.availability,inventory_quantity:c.inventory_quantity,is_allow_for_preorder:c.availability})});return product};h.components=h.components||{};h.components.back_in_stock=h.components.back_in_stock||{};h.components.back_in_stock.BASE_CSS='body, html { background: transparent;-webkit-font-smoothing: antialiased;height: 100%;}html {font-family: sans-serif;font-size: 14px;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}body {margin: 0;font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;font-size: 14px;line-height: 1.5;color: #222;overflow: hidden;-moz-transition: background-color 0.15s linear;-webkit-transition: background-color 0.15s linear;-o-transition: background-color 0.15s linear;transition: background-color 0.15s cubic-bezier(0.785, 0.135, 0.150, 0.860);}body.fadein {background: rgba(0, 0, 0, 0.65);}a {background-color: transparent;}a:active,a:hover {outline: 0;}h1 {font-size: 2em;margin: 0.67em 0;}h3 { font-size: 24px;}h4 {  font-size: 18px;  margin-top: 10px;  margin-bottom: 10px;}h3, h4 {  font-family: inherit;  font-weight: 500;  line-height: 1.1;  color: inherit;}button,input,optgroup,select,textarea {color: inherit;font: inherit;margin: 0;font-family: inherit;font-size: inherit;line-height: inherit;}button {overflow: visible;}button,select {text-transform: none;}button {-webkit-appearance: button;cursor: pointer;}button[disabled] {opacity: 0.6;}button::-moz-focus-inner,input::-moz-focus-inner {border: 0;padding: 0;}input {line-height: normal;}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button {height: auto;}* {-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}*:before,*:after {-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}#container {position: relative;background: white;padding: 12px 18px 40px 18px;}.fade {opacity: 0;-webkit-transition: opacity 0.15s linear;-o-transition: opacity 0.15s linear;transition: opacity 0.15s linear;}.fade.in {opacity: 1;}.modal {  overflow-x: hidden;  overflow-y: auto;  position: fixed;  top: 0;  right: 0;  bottom: 0;  left: 0;  z-index: 999;  -webkit-overflow-scrolling: touch;  outline: 0;}.modal-title {  margin: 0;  font-size: 24px;  line-height: 1.5;}.clearfix:before,.clearfix:after {  content: " ";  display: table;}.clearfix:after {  clear: both;}.form-control {  display: block;  width: 100%;  height: 34px;  padding: 6px 12px;  font-size: 14px;  line-height: 1.5;  color: #222;  background-color: #fff;  background-image: none;  border: 1px solid #ccc;  border-radius: 2px;  box-shadow: inset 0 1px 1px rgba(0,0,0,.075);  transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;}.input-lg {  font-size: 14px;  height: 46px;  padding: 10px 16px;  line-height: 1.3333333;}.submit-container {  margin-top: 20px;}.form-group {  margin-bottom: 15px;}.btn {  display: inline-block;  padding: 8px 12px;  margin-bottom: 0;  font-size: 14px;  font-weight: bold;  line-height: 1.5;  text-align: center;  white-space: nowrap;  vertical-align: middle;  -ms-touch-action: manipulation;  touch-action: manipulation;  cursor: pointer;  -webkit-user-select: none;  -moz-user-select: none;  -ms-user-select: none;  user-select: none;  background-image: none;  border: 1px solid transparent;  border-radius: 2px;}.btn-success {  width: 100%;  color: #fff;  background-color: #439fdb;  border-color: #439fdb;}.btn-lg {  line-height: 24px;  font-size: 15px;  padding: 14px;  line-height: 1.3333333;}.close {  -webkit-appearance: none;  padding: 0;  cursor: pointer;  background: 0 0;  border: 0;  position: absolute;  top: 7px;  right: 15px;  font-size: 30px;  font-weight: 700;  line-height: 1;  color: #ccc;  text-shadow: 0 1px 0 #fff;}.alert {  padding: 6px 11px;  font-size: 13px;  margin: 15px 0;  border: 1px solid transparent;  border-radius: 2px;}.alert-success {  color: #1B9500;  background-color: #d3efcd;  border-color: #d3efcd;}.alert-success a {   color: #1B9500;}.alert-danger {  color: #C72E2F;  background-color: #fcd6d7;  border-color: #fcd6d7;}.pull-right {  float: right;}.text-right {  text-align: right;}.small-print {  font-size: 14px;  line-height: 1.5;}.small-print a {  color: inherit;  text-decoration: underline;}.powered-by {  opacity: 0.8;}.product-title {  margin-bottom: 20px;}.accepts_marketing {  opacity: 0.835;  font-size: 13px;}.accepts_marketing input {  margin-right: 10px;}.completed_message, .error_message {  display: none;}.complete .completed_message {  display: block;}#klaviyo-bis-modal.in {  position: relative;  z-index: 999;  height: 100%;  overflow: hidden;  overflow-y: auto;  -webkit-overflow-scrolling: touch;}@media only screen and (min-width:500px) {  #klaviyo-bis-modal {    max-width: 460px;    margin: auto;  }  #container {    border-radius: 3px;    padding: 30px 40px;  }}@media only screen and (min-width:992px) {  #container {    margin-top: 100px;  }}';
h.components=h.components||{};h.components.back_in_stock=h.components.back_in_stock||{};h.components.back_in_stock.DEFAULT_SETTINGS={trigger:{replace_sold_out:!1,replace_anchor:!1,alternate_anchor:null,product_page_text:"Notify Me When Available",product_page_class:"btn",product_page_text_align:"center",product_page_margin:"0px",collection_page_class:"btn",collection_page_text_align:"center",collection_page_width:"200px",collection_page_text:"Notify Me When Available",collection_page_padding:"inherit"},
modal:{headline:"{product_name}",body_content:"Enter your email address and we'll let you know when it's back.",email_field_label:"Email",is_quantity_field_enabled:!1,quantity_field_label:"Quantity Required",button_label:"Notify me when available",newsletter_subscribe_label:"Add me to your email list.",subscription_success_label:"You're in! We'll let you know when it's back.",footer_content:"",close_label:"Close",is_powered_by_link:!1,styles:h.components.back_in_stock.BASE_CSS,additional_styles:"",
z_index:999999,drop_background_color:"#000",background_color:"#fff",font_family:'"Helvetica Neue", Helvetica, Arial, sans-serif;',headers_font_family:'"Helvetica Neue", Helvetica, Arial, sans-serif;',text_color:"#222",button_text_color:"#fff",button_background_color:"#439fdb",close_button_color:"#ccc",error_background_color:"#fcd6d7",error_text_color:"#C72E2F",success_background_color:"#d3efcd",success_text_color:"#1B9500",subscribe_checked:!0}};h.components.back_in_stock.Settings=S.Model.extend({defaults:{exclude_on_tags:"",
include_on_tags:"",display_on_policy_continue:!1,inventory_quantity_threshold:1,is_allow_for_preorder:!0,is_allow_for_unmanaged_inventory:!0}});h.components.back_in_stock.Main=S.Model.extend();h.components.back_in_stock.MainView=S.View.extend({events:{change:"variantChange","click .klaviyo-bis-trigger":"handleBISTriggerClick"},settings:function(){return this.model.get("settings")},initialize:function(c){c=this.settings().get("platform");this.platform_implementation=h.platforms[c];if(this.platform_implementation.isProductPage())this.model.set("is_on_collections_page",
!1),this.createProductPageTrigger();else if(this.platform_implementation.isCollectionsPage())this.model.set("is_on_collections_page",!0),this.createCollectionPageTriggers();else{this.model.set("is_on_other_page",!0);return}this.model.set("is_on_other_page",!1)},getProductJSON:function(c,e){var f=this;n.getJSON(c,function(c,n,r){c=f.platform_implementation.format_product_json(c);n=c.variants;var J=[],y={},E={};f.model.set("product",c);l.each(n,function(c,e){f.isVariantOutOfStock(c)&&J.push(c);y[c.id]=
c;E[c.title]=c});f.model.set({variants:n,unavailable_variants:J,variants_by_id:y,variants_by_title:E});h.core.log("Variants: ",n.length,"Unavailable Variants: ",J.length);e()})},createProductPageTrigger:function(){var c=this,e=c.$(".klaviyo-bis-trigger"),f={account_id:c.settings().get("account")},f=c.platform_implementation.productDetailsUrl(f);c.getProductJSON(f,function(){if(c.model.get("unavailable_variants").length){c.prepareTriggerElement(e);if(!e.length){c.trigger.renderProductPageTrigger();
var f=n(c.platform_implementation.ADD_TO_CART_BUTTON_ID).eq(0),h=c.trigger.model.get("alternate_anchor"),r="#"+h;!l.isNull(h)&&n(r).length?(f=n(r).eq(0),f.append(c.trigger.$el),c.sold_out_button=f):!0!==c.trigger.model.get("replace_anchor")&&!0!==c.trigger.model.get("replace_sold_out")||!f.length?c.$(c.platform_implementation.ADD_TO_CART_FORM_ID).eq(0).append(c.trigger.$el):(c.sold_out_button=f,c.sold_out_button.parent().append(c.trigger.$el))}c.createModal();c.variantChange()}})},createCollectionPageTriggers:function(){var c=
this,e=this.$(".klaviyo-bis-trigger"),f=this.$(".klaviyo-product-container");f.length&&(c.prepareTriggerElement(e),e.length||(c.trigger.prepareCollectionPageHelpers(),c.trigger.renderCollectionPageTrigger(),l.each(f,function(e){e=n(e).data("klaviyo-handle");var f=c.trigger.$el.clone(),h=n('.klaviyo-product-container[data-klaviyo-handle="'+e+'"] .klaviyo-button-container'),l=h.parent().parent();f.data("klaviyo-handle",e);h.append(f);"static"==l.css("position")&&l.css("position","relative")}),c.createModal()))},
prepareTriggerElement:function(c){var e=this.settings(),f={};l.defaults(f,e.get("trigger"),h.components.back_in_stock.DEFAULT_SETTINGS.trigger);this.trigger=c.length?new h.components.back_in_stock.TriggerView({el:c,model:new h.components.back_in_stock.Trigger(f)}):new h.components.back_in_stock.TriggerView({el:n("<a/>"),model:new h.components.back_in_stock.Trigger(f)})},createModal:function(){var c=this.settings(),e={};parent_body_font_family=n("body").css("font-family");parent_body_font_color=n("body").css("color");
parent_headers_font_family=n("h1,h2,h3").eq(0).css("font-family");parent_button=n(".klaviyo-bis-trigger").eq(0);parent_button_text_color=parent_button.css("color");parent_button_background_color=parent_button.css("background-color");l.isUndefined(parent_body_font_family)||(h.components.back_in_stock.DEFAULT_SETTINGS.modal.font_family=parent_body_font_family);l.isUndefined(parent_body_font_color)||(h.components.back_in_stock.DEFAULT_SETTINGS.modal.text_color=parent_body_font_color);l.isUndefined(parent_headers_font_family)||
(h.components.back_in_stock.DEFAULT_SETTINGS.modal.headers_font_family=parent_headers_font_family);l.isUndefined(parent_button_text_color)||(h.components.back_in_stock.DEFAULT_SETTINGS.modal.button_text_color=parent_button_text_color);l.isUndefined(parent_button_background_color)||(h.components.back_in_stock.DEFAULT_SETTINGS.modal.button_background_color=parent_button_background_color);l.defaults(e,c.get("modal"),h.components.back_in_stock.DEFAULT_SETTINGS.modal);l.extend(e,{account:c.get("account"),
list:c.get("list"),platform:c.get("platform"),api_hostname:c.get("api_hostname")});this.modal=new h.components.back_in_stock.ModalView({el:n("<iframe />"),model:new h.components.back_in_stock.Modal(e)});this.modal.render();this.$el.append(this.modal.$el)},variantChange:function(c){if(!this.model.get("is_on_other_page")&&!this.model.get("is_on_collections_page")&&this.trigger instanceof S.View)if(c=1==this.model.get("variants").length?this.model.get("variants")[0].id:this.platform_implementation.findSelectedVariantId(),
l.isNull(c)){var e=this;for(i=0;3>i;i++)l.delay(function(){return e.setVariantAndShowUI(e.platform_implementation.selected_variant_id)},500)}else this.setVariantAndShowUI(c)},setVariantAndShowUI:function(c){if(l.isUndefined(c)||l.isNull(c))this.trigger.hide(),l.isUndefined(this.sold_out_button)||this.sold_out_button.show();else{this.model.get("product");var e=this.model.get("variants_by_id")[c]||this.model.get("variants")[0];l.isNull(c)&&(c=e&&e.id);h.core.log("Selected Variant: "+c);this.model.set("selected_variant_id",
c);this.modal.setSelectedVariantId(c);e||this.trigger.hide();this.isVariantOutOfStock(e)?(l.isUndefined(this.sold_out_button)||!this.trigger.model.get("replace_anchor")&&!this.trigger.model.get("replace_sold_out")||this.sold_out_button.hide(),this.trigger.show()):(this.trigger.hide(),l.isUndefined(this.sold_out_button)||this.sold_out_button.show())}},isVariantOutOfStock:function(c){var e=this.settings(),e={inventory_quantity_threshold:e.get("inventory_quantity_threshold"),is_allow_for_preorder:e.get("is_allow_for_preorder"),
is_allow_for_unmanaged_inventory:e.get("is_allow_for_unmanaged_inventory"),display_on_policy_continue:e.get("display_on_policy_continue"),exclude_on_tags:this.cleanTags(e.get("exclude_on_tags")),include_on_tags:this.cleanTags(e.get("include_on_tags"))};return this.platform_implementation.isVariantOutOfStock(this.model.get("product"),c,e)},cleanTags:function(c){var e;try{e=c.split(",").filter(String)}catch(f){console.log("Tags not read because invalid format.  Please supply strings for included and excluded tags. If there are multiple values, please delimit with commas."),
e=[]}return e.map(function(c){return c.trim()})},handleBISTriggerClick:function(c){c&&c.preventDefault()&&c.stopPropagation();var e=this;if(this.model.get("is_on_collections_page")){var f=n(c.currentTarget).data("klaviyo-handle"),h=n(n(c.currentTarget).data("klaviyo-quickview-variant")).val();c=e.platform_implementation.productDetailsUrl({product_handle:f});e.getProductJSON(c,function(){!l.isUndefined(h)&&l.isUndefined(this.modal)&&e.createModal();e.showModal(h)})}else e.showModal()},showModal:function(c){var e=
this.model.get("product");c=this.model.get("selected_variant_id")||c||this.model.get("unavailable_variants")[0].id;c=this.model.get("variants_by_id")[c];var f=this.model.get("variants").length,h=this.model.get("unavailable_variants");this.modal.renderForm(e,c,f,h);this.modal.show()}});h.components.back_in_stock.create=function(c,e){c=new h.components.back_in_stock.Settings(c);c.set(e);return new h.components.back_in_stock.MainView({el:document.body,model:new h.components.back_in_stock.Main({settings:c})})};
h.components=h.components||{};h.components.back_in_stock=h.components.back_in_stock||{};h.components.back_in_stock.Trigger=S.Model.extend({});h.components.back_in_stock.TriggerView=S.View.extend({initialize:function(c){},prepareCollectionPageHelpers:function(){var c=n(".klaviyo-product-container"),e=n(".klaviyo-button-container"),f={display:"inline-block",position:"absolute !important",top:"50%",left:"50%",opacity:"0","text-align":this.model.get("collection_page_text_align"),width:this.model.get("collection_page_width")};
klaviyo_button_width=f.width.match(/\d+/);f["margin-left"]="-"+Math.round(klaviyo_button_width/2)+"px";c.css({overflow:"visible !important",position:"initial !important"});e.css(f);c.parent().mouseover(function(){n(this).find(e).css("opacity","1")}).mouseout(function(){n(this).find(e).css("opacity","0")})},renderCollectionPageTrigger:function(){var c=this.model;this.$el.attr("class",c.get("collection_page_class")).addClass("klaviyo-bis-trigger").attr("href","#").text(c.get("collection_page_text")).css("padding",
c.get("collection_page_padding")).css("text-align",c.get("collection_page_text_align"))},renderProductPageTrigger:function(){var c=this.model;this.$el.attr("class",c.get("product_page_class")).addClass("klaviyo-bis-trigger").attr("href","#").text(c.get("product_page_text")).css("text-align",c.get("product_page_text_align")).css("margin",c.get("product_page_margin"))},show:function(){this.$el.show()},hide:function(){this.$el.hide()}});h.components=h.components||{};h.components.back_in_stock=h.components.back_in_stock||
{};l.each({"back_in_stock_document.html":'<!doctype html>\x3c!--[if lt IE 7]> <html class="ie6"> <![endif]--\x3e\x3c!--[if IE 7]> <html class="ie7"> <![endif]--\x3e\x3c!--[if IE 8]> <html class="ie8"> <![endif]--\x3e\x3c!--[if gt IE 8]>\x3c!--\x3e <html> \x3c!--<![endif]--\x3e<head><meta name="viewport" content="width=device-width"><style><%= styles %>#container {background: <%= theme.background_color %>;}body {font-family: <%= theme.font_family %>;color: <%= theme.text_color %>;}body.fadein {background: rgba( <%= theme.fade_color_rgb %>, 0.65);}h3 {font-family: <%= theme.headers_font_family %>;}.btn {color: <%= theme.button_text_color %>;background-color: <%= theme.button_background_color %>;border-color: <%= theme.button_background_color %>;}.close {color: <%= theme.close_button_color %>;}.alert-danger {border-color: <%= theme.failure_background_color %>;background-color: <%= theme.failure_background_color %>;color: <%= theme.failure_text_color %>;}.alert-success {background-color: <%= theme.success_background_color %>;border-color: <%= theme.success_background_color %>;color: <%= theme.success_text_color %>;}.alert-success a {color: <%= theme.success_text_color %>;}</style><% if (additional_styles) { %><style><%= additional_styles %></style><% } %></head><body class="klaviyo-bis-close"><div id="klaviyo-bis-modal"><div class="" id="container"><button type="button" class="close klaviyo-bis-close" data-dismiss="modal">&times;</button><h3 class="modal-title"><%= headline %></h3><p><%= body_content %></p><form action="#" class="form-horizontal clearfix"><div class="form-group"><div id="variant_select" class="col-sm-12"><input type="hidden" id="product" value="<%= product.id %>" /></input><select id="variants" class="selectpicker form-control input-lg"><% _.each(unavailable_variants, function (variant) { %><option value="<%= variant.id %>"><%= variant.title %></option><% }) %></select></div></div><div class="form-group"><div class="col-sm-12"><input type="email" id="email" placeholder="<%= email_field_label %>" class="form-control input-lg" value="" /></input></div><div id="newsletter_subscription"><p><input type="checkbox" id="subscribe_for_newsletter" <%= newsletter_subscribe_checked %>><label for="subscribe_for_newsletter" style="margin-left:10px;"><%= newsletter_subscribe_label %></label></p></div></div><div class="control-group clearfix submit-container"><button type="submit" class="btn btn-success btn-lg col-xs-12"><%= button_label %></button></div><div id="error_message" class="error_message alert alert-danger"></div><div id="completed_message" class="completed_message alert alert-success"><%= subscription_success_label %> <a href="#" class="klaviyo-bis-close"><%= close_label %></a></div></form><p class="small-print"><%= footer_content %></p><% if (is_powered_by_link) { %><p class="small-print powered-by text-right">Powered by <a href="https://www.klaviyo.com" target="_blank">Klaviyo</a></p><% } %></div></div>'},
function(c,e){h.core.templates.register(e,c)});h.components.back_in_stock.Modal=S.Model.extend();h.components.back_in_stock.ModalView=S.View.extend({initialize:function(c){},iframeDocument:function(){var c=this.$el[0];return c.contentDocument||c.contentWindow.document},setSelectedVariantId:function(c){this.model.set("selected_variant_id",c)},render:function(c,e){this.$el.attr({id:"klaviyo-bis-iframe",frameBorder:0,src:"about:blank",allowTransparency:!1}).css({position:"fixed",width:"100%",height:"100%",
top:0,left:0,border:"0",overflow:"hidden","z-index":this.model.get("z_index"),background:"none"}).hide()},renderForm:function(c,e,f,p){var r=this;p=h.core.templates.render("back_in_stock_document.html",{variant:e,product:c,unavailable_variants:p,headline:this.model.get("headline").replace("{product_name}",c.title),body_content:this.model.get("body_content").replace("{product_name}",c.title),email_field_label:this.model.get("email_field_label"),email:"",newsletter_subscribe_label:this.model.get("newsletter_subscribe_label"),
newsletter_subscribe_checked:this.model.get("subscribe_checked")?"checked":"",is_quantity_field_enabled:this.model.get("is_quantity_field_enabled"),quantity_required_label:this.model.get("quantity_field_label"),button_label:this.model.get("button_label"),footer_content:this.model.get("footer_content").replace("{product_name}",c.title),close_label:this.model.get("close_label"),is_powered_by_link:this.model.get("is_powered_by_link"),subscription_success_label:this.model.get("subscription_success_label").replace("{product_name}",
c.title),styles:this.model.get("styles"),additional_styles:this.model.get("additional_styles"),theme:{drop_background_color:this.model.get("drop_background_color"),background_color:this.model.get("background_color"),font_family:this.model.get("font_family"),headers_font_family:this.model.get("headers_font_family"),text_color:this.model.get("text_color"),button_text_color:this.model.get("button_text_color"),button_background_color:this.model.get("button_background_color"),close_button_color:this.model.get("close_button_color"),
error_background_color:this.model.get("error_background_color"),error_text_color:this.model.get("error_text_color"),success_background_color:this.model.get("success_background_color"),success_text_color:this.model.get("success_text_color")}});c=this.iframeDocument();c.open();c.write(p);c.close();p=function(c){n(c.target).hasClass("klaviyo-bis-close")&&(c.preventDefault(),r.hide())};n(c).find("body").on("click",l.bind(p,this)).on("touchend",l.bind(p,this)).find("form").on("submit",l.bind(this.validateAndSubmitForm,
this));1===f?n(c).find("#variant_select").hide():n(c).find('#variant_select option[value="'+e.id+'"]').prop("selected",!0);this.model.get("list")||n(c).find("#newsletter_subscription").hide()},validateAndSubmitForm:function(c){c.preventDefault();var e=this,f=n(c.currentTarget);c=this.iframeDocument();var h=n(c).find("#email").val(),l=n(c).find("#subscribe_for_newsletter").prop("checked")&&"none"!==n(c).find("#newsletter_subscription")[0].style.display;/@/.test(h)&&(f.find("button").attr("disabled",
!0),this.hideErrorMessage(),this.hideSuccessMessage(),f="//"+this.model.get("api_hostname")+"/onsite/components/back-in-stock/subscribe",n.post(f,{a:this.model.get("account"),email:h,g:this.model.get("list"),variant:n(c).find("#variants").val(),product:n(c).find("#product").val(),platform:this.model.get("platform"),subscribe_for_newsletter:l},function(c,f,h){n(e.iframeDocument()).find("form").find("button").removeAttr("disabled");c.success?e.showSuccessMessage():e.showErrorMessage(c.errors.join(" "))}))},
showSuccessMessage:function(){n(this.iframeDocument()).find("#completed_message").show();l.delay(l.bind(this.hide,this),3E5)},hideSuccessMessage:function(){n(this.iframeDocument()).find("#completed_message").hide()},showErrorMessage:function(c){n(this.iframeDocument()).find("#error_message").text(c).show()},hideErrorMessage:function(){n(this.iframeDocument()).find("#error_message").hide()},show:function(){this.$el.show();n(this.iframeDocument()).find("body").addClass("fadein").find('[name="email"]').focus()},
hide:function(){this.$el.hide();this.hideSuccessMessage();n(this.iframeDocument()).find("body").addClass("fadein")}});h.components=h.components||{};var ca={backinstock:h.components.back_in_stock.create};h.components.Router={_settings:{api_hostname:"a.klaviyo.com",logging:!0,account:null,list:null,platform:null},_components:{},init:function(c){l.extend(this._settings,c)},logging:function(c){h.core.LOGGING_ENABLED=!!c},enable:function(c,e){this._components[c]||ca[c]&&(this._components[c]=ca[c](this._settings,
e))}};var E=r.klaviyo;E&&E._initialized||(l.isArray(E)||(r.klaviyo=[],E=r.klaviyo),l.each(["init","logging","enable"],function(c){E[c]=function(){var e=[].slice.call(arguments);return E.push([c].concat(e))}}),N(function(c){h.core.log("Initializing.");for(c=function(c){h.core.log("Executing: "+c[0]);if(l.isArray(c)&&c&&h.components.Router[c[0]])return h.components.Router[c[0]].apply(h.components.Router,c.slice(1))};E.length;)c(E.shift());E.push=c;E._initialized=!0}))})(window);